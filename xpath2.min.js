/*!
 * xpath2 - DOM 3 XPath implementation (with XPath 2.0 language support)
 * (Version: 0.0.1-alpha-1 Built on: 2021-03-27T22:34:07.390Z)
 * Copyright (c) 2021 Sergey Ilinsky <sergey@ilinsky.com> (http://www.ilinsky.com)
 * This work is licensed under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xpath2=t():e.xpath2=t()}(this,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=58)}([function(e,t,n){(function(t){var n=t.Error;function o(e,t){this.code=e,this.message=t||i[e]}o.prototype=new n;var i={XPDY0002:"Evaluation of an expression relies on some part of the dynamic context that has not been assigned a value.",XPST0003:"Expression is not a valid instance of the grammar",XPTY0004:"Type is not appropriate for the context in which the expression occurs",XPST0008:"Expression refers to an element name, attribute name, schema type name, namespace prefix, or variable name that is not defined in the static context",XPST0010:"Axis not supported",XPST0017:"Expanded QName and number of arguments in a function call do not match the name and arity of a function signature",XPTY0018:"The result of the last step in a path expression contains both nodes and atomic values",XPTY0019:"The result of a step (other than the last step) in a path expression contains an atomic value.",XPTY0020:"In an axis step, the context item is not a node.",XPST0051:"It is a static error if a QName that is used as an AtomicType in a SequenceType is not defined in the in-scope schema types as an atomic type.",XPST0081:"A QName used in an expression contains a namespace prefix that cannot be expanded into a namespace URI by using the statically known namespaces.",FORG0001:"Invalid value for cast/constructor.",FORG0003:"fn:zero-or-one called with a sequence containing more than one item.",FORG0004:"fn:one-or-more called with a sequence containing no items.",FORG0005:"fn:exactly-one called with a sequence containing zero or more than one item.",FORG0006:"Invalid argument type.",FODC0001:"No context document.",FORX0001:"Invalid regular expression flags.",FOCA0002:"Invalid lexical value.",FOCH0002:"Unsupported collation.",FONS0004:"No namespace found for prefix."};e.exports=o}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){}n.ANYSIMPLETYPE_DT=1,n.STRING_DT=2,n.BOOLEAN_DT=3,n.DECIMAL_DT=4,n.FLOAT_DT=5,n.DOUBLE_DT=6,n.DURATION_DT=7,n.DATETIME_DT=8,n.TIME_DT=9,n.DATE_DT=10,n.GYEARMONTH_DT=11,n.GYEAR_DT=12,n.GMONTHDAY_DT=13,n.GDAY_DT=14,n.GMONTH_DT=15,n.HEXBINARY_DT=16,n.BASE64BINARY_DT=17,n.ANYURI_DT=18,n.QNAME_DT=19,n.NOTATION_DT=20,n.NORMALIZEDSTRING_DT=21,n.TOKEN_DT=22,n.LANGUAGE_DT=23,n.NMTOKEN_DT=24,n.NAME_DT=25,n.NCNAME_DT=26,n.ID_DT=27,n.IDREF_DT=28,n.ENTITY_DT=29,n.INTEGER_DT=30,n.NONPOSITIVEINTEGER_DT=31,n.NEGATIVEINTEGER_DT=32,n.LONG_DT=33,n.INT_DT=34,n.SHORT_DT=35,n.BYTE_DT=36,n.NONNEGATIVEINTEGER_DT=37,n.UNSIGNEDLONG_DT=38,n.UNSIGNEDINT_DT=39,n.UNSIGNEDSHORT_DT=40,n.UNSIGNEDBYTE_DT=41,n.POSITIVEINTEGER_DT=42,n.LISTOFUNION_DT=43,n.LIST_DT=44,n.UNAVAILABLE_DT=45,n.DATETIMESTAMP_DT=46,n.DAYMONTHDURATION_DT=47,n.DAYTIMEDURATION_DT=48,n.PRECISIONDECIMAL_DT=49,n.ANYATOMICTYPE_DT=50,n.ANYTYPE_DT=51,n.XT_YEARMONTHDURATION_DT=-1,n.XT_UNTYPEDATOMIC_DT=-2,e.exports=n},function(e,t,n){(function(t){n(0);var o=n(2),i=n(6),r=n(4),a=t.String;function s(e){this.value=e}s.prototype=new r,s.prototype.value=null,s.prototype.builtInKind=o.STRING_DT,s.prototype.primitiveKind=i.PRIMITIVE_STRING,s.prototype.valueOf=function(){return this.value},s.prototype.toString=function(){return this.value},s.cast=function(e){return new s(a(e))},e.exports=s}).call(this,n(1))},function(e,t,n){var o=n(0),i=n(2),r=n(6);function a(){}a.prototype=new r,a.prototype.builtInKind=i.ANYATOMICTYPE_DT,a.cast=function(e){throw new o("XPST0017","Abstract type used in constructor function xs:anyAtomicType")},a.isNumeric=function(e){return e.primitiveKind==r.PRIMITIVE_FLOAT||e.primitiveKind==r.PRIMITIVE_DOUBLE||e.primitiveKind==r.PRIMITIVE_DECIMAL},e.exports=a},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(15),a=n(3),s=t.isNaN,u=t.String;function c(e){this.value=e}c.prototype=new r,c.prototype.builtInKind=i.INTEGER_DT;var f=/^[-+]?[0-9]+$/;c.cast=function(e){if(e instanceof c)return new c(e.value);if(e instanceof a||e instanceof cXSUntypedAtomic){if((t=e,u(t).trim()).match(f))return new c(+e);throw new o("FORG0001")}var t;if(e instanceof cXSBoolean)return new c(1*e);if(cXSAnyAtomicType.isNumeric(e)){if(!s(e)&&fIsFinite(e))return new c(+e);throw new o("FOCA0002","Cannot convert '"+e+"' to xs:integer")}throw new o("XPTY0004","Casting value '"+e+"' to xs:integer can never succeed")},e.exports=c}).call(this,n(1))},function(e,t,n){var o=n(2),i=n(27);function r(){}r.prototype=new i,r.prototype.builtInKind=o.ANYSIMPLETYPE_DT,r.prototype.primitiveKind=null,r.PRIMITIVE_ANYURI="anyURI",r.PRIMITIVE_BASE64BINARY="base64Binary",r.PRIMITIVE_BOOLEAN="boolean",r.PRIMITIVE_DATE="date",r.PRIMITIVE_DATETIME="dateTime",r.PRIMITIVE_DECIMAL="decimal",r.PRIMITIVE_DOUBLE="double",r.PRIMITIVE_DURATION="duration",r.PRIMITIVE_FLOAT="float",r.PRIMITIVE_GDAY="gDay",r.PRIMITIVE_GMONTH="gMonth",r.PRIMITIVE_GMONTHDAY="gMonthDay",r.PRIMITIVE_GYEAR="gYear",r.PRIMITIVE_GYEARMONTH="gYearMonth",r.PRIMITIVE_HEXBINARY="hexBinary",r.PRIMITIVE_NOTATION="NOTATION",r.PRIMITIVE_QNAME="QName",r.PRIMITIVE_STRING="string",r.PRIMITIVE_TIME="time",e.exports=r},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(11),u=n(3),c=t.String;function f(e){this.value=e}f.prototype=new a,f.prototype.builtInKind=i.BOOLEAN_DT,f.prototype.primitiveKind=r.PRIMITIVE_BOOLEAN,f.prototype.value=null,f.prototype.valueOf=function(){return this.value},f.prototype.toString=function(){return c(this.value)};var l=/^(0|1|true|false)$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof u||e instanceof s){var t;if(t=(n=e,c(n).trim()).match(l))return new f("1"==t[1]||"true"==t[1]);throw new o("FORG0001")}var n;if(a.isNumeric(e))return new f(0!=e);throw new o("XPTY0004","Casting value '"+e+"' to xs:boolean can never succeed")},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(4),r=n(11),a=n(7),s=n(14),u=n(3),c=n(16),f=n(13),l=n(33),p=n(65),m=n(66),h=n(67),d=n(68),y=n(69),v=t.isNaN;function w(){}w.toEBV=function(e,t){if(!e.length)return!1;var n=e[0];if(t.DOMAdapter.isNode(n))return!0;if(1==e.length){if(n instanceof a)return n.value.valueOf();if(n instanceof u)return!!n.valueOf().length;if(i.isNumeric(n))return!(v(n.valueOf())||0==n.valueOf());throw new o("FORG0006","Effective boolean value is defined only for sequences containing booleans, strings, numbers, URIs, or nodes")}throw new o("FORG0006","Effective boolean value is not defined for a sequence of two or more items")},w.atomize=function(e,t){for(var n,o,a=[],s=0,u=e.length;s<u;s++){if(o=null,null==(n=e[s]))o=null;else if(t.DOMAdapter.isNode(n)){var c=t.DOMAdapter.getProperty;switch(c(n,"nodeType")){case 1:o=new r(c(n,"textContent"));break;case 2:o=new r(c(n,"value"));break;case 3:case 4:case 8:case 7:o=new r(c(n,"data"));break;case 9:var f=c(n,"documentElement");o=new r(f?c(f,"textContent"):"")}}else n instanceof i&&(o=n);null!=o&&a.push(o)}return a},w.order=function(e,t){return e.sort((function(e,n){var o=t.DOMAdapter.compareDocumentPosition(e,n);return 2&o?1:4&o?-1:0}))},w.assertSequenceItemType=function(e,t,n,a){for(var v,T,g=0,x=e.length;g<x;g++)if(T=e[g],n==f||n.prototype instanceof f){if(!t.DOMAdapter.isNode(T))throw new o("XPTY0004","Required item type of "+a+" is "+n);if(n!=f&&(v=t.DOMAdapter.getProperty(T,"nodeType"),[null,l,p,m,m,null,null,h,d,y,null,null,null][v]!=n))throw new o("XPTY0004","Required item type of "+a+" is "+n)}else if(n==i||n.prototype instanceof i){if(T=w.atomize([T],t)[0],n!=i&&(T instanceof r?T=n.cast(T):n==u?T instanceof c&&(T=u.cast(T)):n==s&&i.isNumeric(T)&&(T=n.cast(T))),!(T instanceof n))throw new o("XPTY0004","Required item type of "+a+" is "+n);e[g]=T}},w.assertSequenceCardinality=function(e,t,n,i){var r=e.length;if("?"==n){if(r>1)throw new o("XPTY0004","Required cardinality of "+i+" is one or zero")}else if("+"==n){if(r<1)throw new o("XPTY0004","Required cardinality of "+i+" is one or more")}else if("*"!=n&&1!=r)throw new o("XPTY0004","Required cardinality of "+i+" is exactly one")},e.exports=w}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=t.Function;function r(e,t){this.namespaceResolver=e||null,this.baseURI=t||null,this.dataTypes={},this.documents={},this.functions={},this.collations={},this.collections={}}r.prototype.baseURI=null,r.prototype.dataTypes=null,r.prototype.documents=null,r.prototype.functions=null,r.prototype.defaultFunctionNamespace=null,r.prototype.collations=null,r.prototype.defaultCollationName="http://www.w3.org/2005/xpath-functions/collation/codepoint",r.prototype.collections=null,r.prototype.defaultCollection=null,r.prototype.namespaceResolver=null,r.prototype.defaultElementNamespace=null,r.NS_XSD="http://www.w3.org/2001/XMLSchema",r.NS_XPF="http://www.w3.org/2005/xpath-functions",r.NS_XNS="http://www.w3.org/2000/xmlns/",r.NS_XML="http://www.w3.org/XML/1998/namespace";var a=/^(?:\{([^}]+)\})?(.+)$/;r.prototype.setDataType=function(e,t){var n=e.match(a);n&&n[1]!=r.NS_XSD&&(this.dataTypes[e]=t)},r.prototype.getDataType=function(e){var t=e.match(a);if(t)return t[1]==r.NS_XSD?r.dataTypes[t[2]]:this.dataTypes[e]},r.prototype.setDocument=function(e,t){this.documents[e]=t},r.prototype.getDocument=function(e){return this.documents[e]},r.prototype.setFunction=function(e,t){var n=e.match(a);n&&n[1]!=r.NS_XPF&&(this.functions[e]=t)},r.prototype.getFunction=function(e){var t=e.match(a);if(t)return t[1]==r.NS_XPF?r.functions[t[2]]:this.functions[e]},r.prototype.setCollation=function(e,t){this.collations[e]=t},r.prototype.getCollation=function(e){return this.collations[e]},r.prototype.setCollection=function(e,t){this.collections[e]=t},r.prototype.getCollection=function(e){return this.collections[e]},r.prototype.getURIForPrefix=function(e){var t,n=this.namespaceResolver,a=n&&n.lookupNamespaceURI?n.lookupNamespaceURI:n;if(a instanceof i&&(t=a.call(n,e)))return t;if("fn"==e)return r.NS_XPF;if("xs"==e)return r.NS_XSD;if("xml"==e)return r.NS_XML;if("xmlns"==e)return r.NS_XNS;throw new o("XPST0081","Prefix '"+e+"' has not been declared")},r.functions={},r.signatures={},r.dataTypes={},r.operators={},r.defineSystemFunction=function(e,t,n){r.functions[e]=n,r.signatures[e]=t},r.defineSystemDataType=function(e,t){r.dataTypes[e]=t},r.defineSystemOperator=function(e,t){r.operators[e]=t},e.exports=r}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(11),u=n(3),c=n(12),f=t.Array,l=t.Math,p=t.String;function m(e,t,n,o,i,r,a,s){this.year=e,this.month=t,this.day=n,this.hours=o,this.minutes=i,this.seconds=r,this.timezone=a,this.negative=s}m.prototype=new a,m.prototype.builtInKind=i.DATETIME_DT,m.prototype.primitiveKind=r.PRIMITIVE_DATETIME,m.prototype.year=null,m.prototype.month=null,m.prototype.day=null,m.prototype.hours=null,m.prototype.minutes=null,m.prototype.seconds=null,m.prototype.timezone=null,m.prototype.negative=null,m.prototype.toString=function(){return m.getDateComponent(this)+"T"+m.getTimeComponent(this)+m.getTZComponent(this)};var h=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;m.cast=function(e){if(e instanceof m)return e;if(e instanceof u||e instanceof s){var t=(f=e,p(f).trim()).match(h);if(t){var n=+t[2],i=+t[3],a=+t[4],c=!!t[10];if(a-1<m.getDaysForYearMonth(n,i))return m.normalize(new m(n,i,a,c?24:+t[6],c?0:+t[7],+((c?0:t[8])+"."+(c?0:t[9]||0)),t[12]?"Z"==t[12]?0:("-"==t[13]?-1:1)*(60*t[14]+1*t[15]):null,"-"==t[1]));throw new o("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new o("FORG0001")}var f;if(e.primitiveKind==r.PRIMITIVE_DATE)return new m(e.year,e.month,e.day,0,0,0,e.timezone,e.negative);throw new o("XPTY0004","Casting value '"+e+"' to xs:dateTime can never succeed")},m.pad=function(e,t){var n=p(e);return arguments.length<2&&(t=2),(n.length<t+1?new f(t+1-n.length).join("0"):"")+n};var d=[31,28,31,30,31,30,31,31,30,31,30,31];m.getDaysForYearMonth=function(e,t){return 2==t&&(e%400==0||e%100!=0&&e%4==0)?29:d[t-1]},m.getTZComponent=function(e){var t=e.timezone;return null==t?"":t?(t>0?"+":"-")+m.pad(l.abs(~~(t/60)))+":"+m.pad(l.abs(t%60)):"Z"},m.getDateComponent=function(e){return(e.negative?"-":"")+m.pad(e.year,4)+"-"+m.pad(e.month)+"-"+m.pad(e.day)},m.getTimeComponent=function(e){var t=p(e.seconds).split(".");return m.pad(e.hours)+":"+m.pad(e.minutes)+":"+m.pad(t[0])+(t.length>1?"."+t[1]:"")},m.normalizeDate=function(e,t){if(!t){var n=m.getDaysForYearMonth(e.year,e.month);if(e.day>n)for(;e.day>n;)e.month+=1,e.month>12&&(e.year+=1,0==e.year&&(e.year=1),e.month=1),e.day-=n,n=m.getDaysForYearMonth(e.year,e.month);else if(e.day<1)for(;e.day<1;)e.month-=1,e.month<1&&(e.year-=1,0==e.year&&(e.year=-1),e.month=12),n=m.getDaysForYearMonth(e.year,e.month),e.day+=n}return e.month>12?(e.year+=~~(e.month/12),0==e.year&&(e.year=1),e.month=e.month%12):e.month<1&&(e.year+=~~(e.month/12)-1,0==e.year&&(e.year=-1),e.month=e.month%12+12),e},m.normalizeTime=function(e){return(e.seconds>=60||e.seconds<0)&&(e.minutes+=~~(e.seconds/60)-(e.seconds<0&&e.seconds%60?1:0),e.seconds=e.seconds%60+(e.seconds<0&&e.seconds%60?60:0)),(e.minutes>=60||e.minutes<0)&&(e.hours+=~~(e.minutes/60)-(e.minutes<0&&e.minutes%60?1:0),e.minutes=e.minutes%60+(e.minutes<0&&e.minutes%60?60:0)),(e.hours>=24||e.hours<0)&&(e instanceof m&&(e.day+=~~(e.hours/24)-(e.hours<0&&e.hours%24?1:0)),e.hours=e.hours%24+(e.hours<0&&e.hours%24?24:0)),e},m.normalize=function(e){return m.normalizeDate(m.normalizeTime(e))},m.adjustTimezone=function(e,t){if(null==e)return null;if(null==t)e.timezone=null;else{var n=c.toSeconds(t)/60;if(null!=e.timezone){var o=n-e.timezone;e.primitiveKind==r.PRIMITIVE_DATE?o<0&&e.day--:(e.minutes+=o%60,e.hours+=~~(o/60)),m.normalize(e)}e.timezone=n}return e},e.exports=m}).call(this,n(1))},function(e,t,n){(function(t){n(0);var o=n(2),i=n(4),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.XT_UNTYPEDATOMIC_DT,a.prototype.toString=function(){return r(this.value)},a.cast=function(e){return e instanceof a?e:new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(20),a=n(3),s=t.String,u=t.Math;function c(e,t,n,o,i){r.call(this,0,0,e,t,n,o,i)}c.prototype=new r,c.prototype.builtInKind=i.DAYTIMEDURATION_DT,c.prototype.toString=function(){return(this.negative?"-":"")+"P"+(r.getDayTimeComponent(this)||"T0S")};var f=/^(-)?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof a||e instanceof cXSUntypedAtomic){var t=(n=e,s(n).trim()).match(f);if(t)return r.normalizeDayTimeDuration(new c(+t[2]||0,+t[3]||0,+t[4]||0,+t[5]||0,"-"==t[1]));throw new o("FORG0001")}var n;if(e.builtInKind==i.XT_YEARMONTHDURATION_DT)return new c(0,0,0,0);if(e instanceof r)return new c(e.day,e.hours,e.minutes,e.seconds,e.negative);throw new o("XPTY0004","Casting value '"+e+"' to xs:dayTimeDuration can never succeed")},c.toSeconds=function(e){return(60*(60*(24*e.day+e.hours)+e.minutes)+e.seconds)*(e.negative?-1:1)},c.fromSeconds=function(e){var t=(e=u.round(e))<0,n=~~((e=u.abs(e))/86400),o=~~((e-=3600*n*24)/3600),i=~~((e-=3600*o)/60);return new c(n,o,i,e-=60*i,t)},e.exports=c}).call(this,n(1))},function(e,t,n){var o=n(32);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(11),u=n(7),c=n(3),f=t.String;function l(e){this.value=e}l.prototype=new a,l.prototype.builtInKind=i.DOUBLE_DT,l.prototype.primitiveKind=r.PRIMITIVE_DOUBLE,l.prototype.value=null,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return f(this.value)};var p=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof c||e instanceof s){var t=(n=e,f(n).trim()).match(p);if(t)return new l(t[7]?+t[7].replace("INF","Infinity"):+e);throw new o("FORG0001")}var n;if(e instanceof u)return new l(1*e);if(e.primitiveKind==r.PRIMITIVE_DECIMAL||e.primitiveKind==r.PRIMITIVE_FLOAT)return new l(e.value);throw new o("XPTY0004","Casting value '"+e+"' to xs:double can never succeed")},e.exports=l}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(11),a=n(3),s=n(7),u=n(6),c=n(4),f=t.isNaN,l=t.isFinite,p=t.String;function m(e){this.value=e}m.prototype=new c,m.prototype.builtInKind=i.DECIMAL_DT,m.prototype.primitiveKind=u.PRIMITIVE_DECIMAL,m.prototype.value=null,m.prototype.valueOf=function(){return this.value},m.prototype.toString=function(){return p(this.value)};var h=/^[+\-]?((\d+(\.\d*)?)|(\.\d+))$/;m.cast=function(e){if(e instanceof m)return e;if(e instanceof a||e instanceof r){if((t=e,p(t).trim()).match(h))return new m(+e);throw new o("FORG0001")}var t;if(e instanceof s)return new m(1*e);if(e.primitiveKind==u.PRIMITIVE_FLOAT||e.primitiveKind==u.PRIMITIVE_DOUBLE){if(!f(e)&&l(e))return new m(+e);throw new o("FOCA0002","Cannot convert '"+e+"' to xs:decimal")}throw new o("XPTY0004","Casting value '"+e+"' to xs:decimal can never succeed")},e.exports=m}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=t.String;function c(e,t,n,o,i){this.scheme=e,this.authority=t,this.path=n,this.query=o,this.fragment=i}c.prototype=new a,c.prototype.builtInKind=i.ANYURI_DT,c.prototype.primitiveKind=r.PRIMITIVE_ANYURI,c.prototype.scheme=null,c.prototype.authority=null,c.prototype.path=null,c.prototype.query=null,c.prototype.fragment=null,c.prototype.toString=function(){return(this.scheme?this.scheme+":":"")+(this.authority?"//"+this.authority:"")+(this.path?this.path:"")+(this.query?"?"+this.query:"")+(this.fragment?"#"+this.fragment:"")};var f=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t;if(t=(n=e,u(n).trim()).match(f))return new c(t[2],t[4],t[5],t[7],t[9]);throw new o("FORG0001")}var n;throw new o("XPTY0004","Casting value '"+e+"' to xs:anyURI can never succeed")},e.exports=c}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(11),u=n(3),c=n(10),f=t.String;function l(e,t,n,o,i){this.year=e,this.month=t,this.day=n,this.timezone=o,this.negative=i}l.prototype=new a,l.prototype.builtInKind=i.DATE_DT,l.prototype.primitiveKind=r.PRIMITIVE_DATE,l.prototype.year=null,l.prototype.month=null,l.prototype.day=null,l.prototype.timezone=null,l.prototype.negative=null,l.prototype.toString=function(){return c.getDateComponent(this)+c.getTZComponent(this)};var p=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof u||e instanceof s){var t=(a=e,f(a).trim()).match(p);if(t){var n=+t[2],i=+t[3],r=+t[4];if(r-1<c.getDaysForYearMonth(n,i))return new l(n,i,r,t[5]?"Z"==t[5]?0:("-"==t[6]?-1:1)*(60*t[7]+1*t[8]):null,"-"==t[1]);throw new o("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new o("FORG0001")}var a;if(e instanceof c)return new l(e.year,e.month,e.day,e.timezone,e.negative);throw new o("XPTY0004","Casting value '"+e+"' to xs:date can never succeed")},e.exports=l}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(11),u=n(3),c=n(10),f=t.String;function l(e,t,n,o){this.hours=e,this.minutes=t,this.seconds=n,this.timezone=o}l.prototype=new a,l.prototype.builtInKind=i.TIME_DT,l.prototype.primitiveKind=r.PRIMITIVE_TIME,l.prototype.hours=null,l.prototype.minutes=null,l.prototype.seconds=null,l.prototype.timezone=null,l.prototype.toString=function(){return c.getTimeComponent(this)+c.getTZComponent(this)};var p=/^(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof u||e instanceof s){var t=(i=e,f(i).trim()).match(p);if(t){var n=!!t[6];return new l(n?0:+t[2],n?0:+t[3],+((n?0:t[4])+"."+(n?0:t[5]||0)),t[8]?"Z"==t[8]?0:("-"==t[9]?-1:1)*(60*t[10]+1*t[11]):null)}throw new o("FORG0001")}var i;if(e instanceof c)return new l(e.hours,e.minutes,e.seconds,e.timezone);throw new o("XPTY0004","Casting value '"+e+"' to xs:time can never succeed")},e.exports=l}).call(this,n(1))},function(e,t,n){(function(t){var o=n(60),i=n(30),r=n(0),a=n(61),s=n(9),u=n(46);n(99),n(111),n(120);var c=t.Object,f=t.TypeError,l=new s,p=new i;function m(e,t){if("string"!=typeof e)throw new f("Missing or inappropriate type of the expression parameter. String required.");if(!(t instanceof s))throw new f("Missing or inappropriate type of the static context parameter. StaticContext type required.");return new a(e,t)}function h(e,t){if(!(e instanceof a))throw new f("Missing or inappropriate type of the expression parameter. Expression type required.");if(!(t instanceof o))throw new f("Missing or inappropriate type of the dynamic context parameter. DynamicContext type required.");for(var n,i=e.evaluate(t),r=[],s=0,u=i.length;s<u;s++)r[r.length]=t.DOMAdapter.isNode(n=i[s])?n:o.xs2js(n);return r}function d(e,t,n,i){e||(e=l),void 0===t&&(t=null),i||(i=p);var r,a={};if("object"==typeof n)for(var s in n)r=n[s],c.hasOwnProperty.call(n,s)&&null!=r&&(a[s]=i.isNode(r)?r:o.js2xs(r));return new o(e,null==t||i.isNode(t)?t:o.js2xs(t),a,i)}e.exports={compile:m,execute:h,evaluate:function(e,t,n,o,i){if("string"!=typeof e)throw new f("Missing or inappropriate type of the expression parameter");var r=d("function"==typeof n?new s(n):n,t,o,i);return h(m(e,r.staticContext),r)},createStaticContext:function(e,t){return new s(e,t)},createDynamicContext:d,defaultDOMAdapter:p,defaultStaticContext:l,Exception:r,Expression:a,DynamicContext:o,DOMAdapter:i,StaticContext:s,StringCollator:u}}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=t.String;function c(e,t,n,o,i,r,a){this.year=e,this.month=t,this.day=n,this.hours=o,this.minutes=i,this.seconds=r,this.negative=a}c.prototype=new a,c.prototype.builtInKind=i.DURATION_DT,c.prototype.primitiveKind=r.PRIMITIVE_DURATION,c.prototype.year=null,c.prototype.month=null,c.prototype.day=null,c.prototype.hours=null,c.prototype.minutes=null,c.prototype.seconds=null,c.prototype.negative=null,c.prototype.toString=function(){return(this.negative?"-":"")+"P"+(c.getYearMonthComponent(this)+c.getDayTimeComponent(this)||"T0S")};var f=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;c.cast=function(e){if(e instanceof c)return e;if(e.builtInKind==i.XT_YEARMONTHDURATION_DT)return new c(e.year,e.month,0,0,0,0,e.negative);if(e.builtInKind==i.XT_DAYTIMEDURATION_DT)return new c(0,0,e.day,e.hours,e.minutes,e.seconds,e.negative);if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(r=e,u(r).trim()).match(f);if(t)return n=new c(+t[2]||0,+t[3]||0,+t[4]||0,+t[5]||0,+t[6]||0,+t[7]||0,"-"==t[1]),c.normalizeYearMonthDuration(c.normalizeDayTimeDuration(n));throw new o("FORG0001")}var n,r;throw new o("XPTY0004","Casting value '"+e+"' to xs:duration can never succeed")},c.getYearMonthComponent=function(e){return(e.year?e.year+"Y":"")+(e.month?e.month+"M":"")},c.getDayTimeComponent=function(e){return(e.day?e.day+"D":"")+(e.hours||e.minutes||e.seconds?"T"+(e.hours?e.hours+"H":"")+(e.minutes?e.minutes+"M":"")+(e.seconds?e.seconds+"S":""):"")},c.normalizeDayTimeDuration=function(e){return e.seconds>=60&&(e.minutes+=~~(e.seconds/60),e.seconds%=60),e.minutes>=60&&(e.hours+=~~(e.minutes/60),e.minutes%=60),e.hours>=24&&(e.day+=~~(e.hours/24),e.hours%=24),e},c.normalizeYearMonthDuration=function(e){return e.month>=12&&(e.year+=~~(e.month/12),e.month%=12),e},e.exports=c}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(20),a=n(3),s=t.String;function u(e,t,n){r.call(this,e,t,0,0,0,0,n)}u.prototype=new r,u.prototype.builtInKind=i.XT_YEARMONTHDURATION_DT,u.prototype.toString=function(){return(this.negative?"-":"")+"P"+(r.getYearMonthComponent(this)||"0M")};var c=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/;u.cast=function(e){if(e instanceof u)return e;if(e instanceof a||e instanceof cXSUntypedAtomic){var t=(n=e,s(n).trim()).match(c);if(t)return r.normalizeYearMonthDuration(new u(+t[2]||0,+t[3]||0,"-"==t[1]));throw new o("FORG0001")}var n;if(e.builtInKind==i.XT_DAYTIMEDURATION_DT)return new u(0,0);if(e instanceof r)return new u(e.year,e.month,e.negative);throw new o("XPTY0004","Casting value '"+e+"' to xs:yearMonthDuration can never succeed")},e.exports=u}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=t.String;function c(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}c.prototype=new a,c.prototype.builtInKind=i.QNAME_DT,c.prototype.primitiveKind=r.PRIMITIVE_QNAME,c.prototype.prefix=null,c.prototype.localName=null,c.prototype.namespaceURI=null,c.prototype.toString=function(){return(this.prefix?this.prefix+":":"")+this.localName};var f=/^(?:(?![0-9-])(\w[\w.-]*)\:)?(?![0-9-])(\w[\w.-]*)$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,u(n).trim()).match(f);if(t)return new c(t[1]||null,t[2],null);throw new o("FORG0001")}var n;throw new o("XPTY0004","Casting value '"+e+"' to xs:QName can never succeed")},e.exports=c}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(47),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.NCNAME_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(48),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.TOKEN_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){var o=n(0),i=n(2),r=n(5);function a(e){this.value=e}a.prototype=new r,a.prototype.builtInKind=i.NONNEGATIVEINTEGER_DT,a.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=0)return new a(t.value);throw new o("FORG0001")},e.exports=a},function(e,t,n){var o=n(19).DOMAdapter,i=n(19).StaticContext;function r(){}r.prototype=new o;var a=new i;r.prototype.getProperty=function(e,t){if(t in e)return e[t];if("baseURI"==t){for(var n,o="",i=a.getFunction("{http://www.w3.org/2005/xpath-functions}resolve-uri"),r=a.getDataType("{http://www.w3.org/2001/XMLSchema}string"),s=e;s;s=s.parentNode)1==s.nodeType&&(n=s.getAttribute("xml:base"))&&(o=i(new r(n),new r(o)).toString());return o}if("textContent"==t){var u=[];return function(e){for(var t,n=0;t=e.childNodes[n];n++)3==t.nodeType||4==t.nodeType?u.push(t.data):1==t.nodeType&&t.firstChild&&arguments.callee(t)}(e),u.join("")}},e.exports=r},function(e,t,n){var o=n(2);function i(){}i.prototype.builtInKind=o.ANYTYPE_DT,e.exports=i},function(e,t,n){var o=n(0),i=n(2),r=n(6),a=n(4);function s(){}s.prototype=new a,s.prototype.builtInKind=i.NOTATION_DT,s.prototype.primitiveKind=r.PRIMITIVE_NOTATION,s.cast=function(e){throw new o("XPST0017","Abstract type used in constructor function xs:NOTATION")},e.exports=s},function(e,t,n){(function(t){var n=t.Error,o=t.Object;function i(e,t){this.code=e,this.message=t}i.prototype=o.create(n.prototype),i.prototype.code=null,i.prototype.message=null,i.INVALID_EXPRESSION_ERR=51,i.TYPE_ERR=52,e.exports=i}).call(this,n(1))},function(e,t,n){(function(t){var n=t.Math;function o(){}o.prototype.isNode=function(e){return e&&!!e.nodeType},o.prototype.getProperty=function(e,t){return e[t]},o.prototype.isSameNode=function(e,t){return e==t},o.prototype.compareDocumentPosition=function(e,t){if("compareDocumentPosition"in e)return e.compareDocumentPosition(t);if(t==e)return 0;var o,i,r,a,s,u=null,c=null;if(2==this.getProperty(e,"nodeType")&&(u=e,e=this.getProperty(u,"ownerElement")),2==this.getProperty(t,"nodeType")&&(c=t,t=this.getProperty(c,"ownerElement")),u&&c&&e&&e==t)for(a=0,s=(o=this.getProperty(e,"attributes")).length;a<s;a++){if((i=o[a])==u)return 36;if(i==c)return 34}var f,l,p,m,h=[],d=[];for(u&&h.push(u),r=e;r;r=this.getProperty(r,"parentNode"))h.push(r);for(c&&d.push(c),r=t;r;r=this.getProperty(r,"parentNode"))d.push(r);if((this.getProperty(e,"ownerDocument")||e)!=(this.getProperty(t,"ownerDocument")||t)||h[h.length-1]!=d[d.length-1])return 33;for(a=n.min(f=h.length,p=d.length);a;--a)if((l=h[--f])!=(m=d[--p])){if(2==this.getProperty(l,"nodeType"))return 4;if(2==this.getProperty(m,"nodeType"))return 2;if(!this.getProperty(m,"nextSibling"))return 4;if(!this.getProperty(l,"nextSibling"))return 2;for(r=this.getProperty(m,"previousSibling");r;r=this.getProperty(r,"previousSibling"))if(r==l)return 4;return 2}return f<p?20:10},o.prototype.lookupNamespaceURI=function(e,t){if("lookupNamespaceURI"in e)return e.lookupNamespaceURI(t);for(;e&&9!=this.getProperty(e,"nodeType");e=this.getProperty(e,"parentNode")){if(t==this.getProperty(e,"prefix"))return this.getProperty(e,"namespaceURI");if(1==this.getProperty(e,"nodeType"))for(var n=this.getProperty(e,"attributes"),o=0,i=n.length,r="xmlns:"+t;o<i;o++)if(this.getProperty(n[o],"nodeName")==r)return this.getProperty(n[o],"value")}return null},o.prototype.getElementById=function(e,t){return"getElementById"in e?e.getElementById(t):function e(t,n,o){for(var i,r=n;r;r=t.getProperty(r,"nextSibling"))if(1==t.getProperty(r,"nodeType")){if(o(t,r))return r;if(i=e(t,t.getProperty(r,"firstChild"),o))return i}return null}(this,this.getProperty(e,"documentElement"),(function(e,n){for(var o=e.getProperty(n,"attributes"),i=0,r=o.length;i<r;i++)if("id"==e.getProperty(o[i],"nodeName"))return e.getProperty(o[i],"value")==t;return!1}))},e.exports=o}).call(this,n(1))},function(e,t,n){var o=n(0),i=n(8),r=n(9),a=n(17),s=n(14),u=n(18),c=n(10),f=n(21),l=n(12),p=n(11),m=n(4);function h(e){this.left=e,this.items=[]}h.prototype.left=null,h.prototype.items=null,h.operators={},h.operators["+"]=function(e,t,n){var i="",s=!1;if(m.isNumeric(e)?m.isNumeric(t)&&(i="numeric-add"):e instanceof a?t instanceof f?i="add-yearMonthDuration-to-date":t instanceof l&&(i="add-dayTimeDuration-to-date"):e instanceof f?t instanceof a?(i="add-yearMonthDuration-to-date",s=!0):t instanceof c?(i="add-yearMonthDuration-to-dateTime",s=!0):t instanceof f&&(i="add-yearMonthDurations"):e instanceof l?t instanceof a?(i="add-dayTimeDuration-to-date",s=!0):t instanceof u?(i="add-dayTimeDuration-to-time",s=!0):t instanceof c?(i="add-dayTimeDuration-to-dateTime",s=!0):t instanceof l&&(i="add-dayTimeDurations"):e instanceof u?t instanceof l&&(i="add-dayTimeDuration-to-time"):e instanceof c&&(t instanceof f?i="add-yearMonthDuration-to-dateTime":t instanceof l&&(i="add-dayTimeDuration-to-dateTime")),i)return r.operators[i].call(n,s?t:e,s?e:t);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},h.operators["-"]=function(e,t,n){var i="";if(m.isNumeric(e)?m.isNumeric(t)&&(i="numeric-subtract"):e instanceof a?t instanceof a?i="subtract-dates":t instanceof f?i="subtract-yearMonthDuration-from-date":t instanceof l&&(i="subtract-dayTimeDuration-from-date"):e instanceof u?t instanceof u?i="subtract-times":t instanceof l&&(i="subtract-dayTimeDuration-from-time"):e instanceof c?t instanceof c?i="subtract-dateTimes":t instanceof f?i="subtract-yearMonthDuration-from-dateTime":t instanceof l&&(i="subtract-dayTimeDuration-from-dateTime"):e instanceof f?t instanceof f&&(i="subtract-yearMonthDurations"):e instanceof l&&t instanceof l&&(i="subtract-dayTimeDurations"),i)return r.operators[i].call(n,e,t);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},h.prototype.evaluate=function(e){var t=i.atomize(this.left.evaluate(e),e);if(!t.length)return[];i.assertSequenceCardinality(t,e,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof p&&(n=s.cast(n));for(var o,r,a=0,u=this.items.length;a<u;a++){if(!(o=i.atomize(this.items[a][1].evaluate(e),e)).length)return[];i.assertSequenceCardinality(o,e,"?","first operand of '"+this.items[a][0]+"'"),(r=o[0])instanceof p&&(r=s.cast(r)),n=h.operators[this.items[a][0]](n,r,e)}return[n]},e.exports=h},function(e,t){e.exports=function(){}},function(e,t,n){var o=n(13);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(0),i=n(8),r=n(9),a=n(11),s=n(21),u=n(12),c=n(4);function f(e){this.left=e,this.items=[]}f.prototype.left=null,f.prototype.items=null,f.operators={},f.operators["*"]=function(e,t,n){var i="",a=!1;if(c.isNumeric(e)?c.isNumeric(t)?i="numeric-multiply":t instanceof s?(i="multiply-yearMonthDuration",a=!0):t instanceof u&&(i="multiply-dayTimeDuration",a=!0):e instanceof s?c.isNumeric(t)&&(i="multiply-yearMonthDuration"):e instanceof u&&c.isNumeric(t)&&(i="multiply-dayTimeDuration"),i)return r.operators[i].call(n,a?t:e,a?e:t);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},f.operators.div=function(e,t,n){var i="";if(c.isNumeric(e)?c.isNumeric(t)&&(i="numeric-divide"):e instanceof s?c.isNumeric(t)?i="divide-yearMonthDuration":t instanceof s&&(i="divide-yearMonthDuration-by-yearMonthDuration"):e instanceof u&&(c.isNumeric(t)?i="divide-dayTimeDuration":t instanceof u&&(i="divide-dayTimeDuration-by-dayTimeDuration")),i)return r.operators[i].call(n,e,t);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},f.operators.idiv=function(e,t,n){if(c.isNumeric(e)&&c.isNumeric(t))return r.operators["numeric-integer-divide"].call(n,e,t);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},f.operators.mod=function(e,t,n){if(c.isNumeric(e)&&c.isNumeric(t))return r.operators["numeric-mod"].call(n,e,t);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},f.prototype.evaluate=function(e){var t=i.atomize(this.left.evaluate(e),e);if(!t.length)return[];i.assertSequenceCardinality(t,e,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof a&&(n=cXSDouble.cast(n));for(var o,r,s=0,u=this.items.length;s<u;s++){if(!(o=i.atomize(this.items[s][1].evaluate(e),e)).length)return[];i.assertSequenceCardinality(o,e,"?","second operand of '"+this.items[s][0]+"'"),(r=o[0])instanceof a&&(r=cXSDouble.cast(r)),n=f.operators[this.items[s][0]](n,r,e)}return[n]},e.exports=f},function(e,t,n){var o=n(0),i=n(8),r=n(9),a=n(4),s=n(7),u=n(5),c=n(3),f=n(16),l=n(10),p=n(17),m=n(18),h=n(22),d=n(36),y=n(37),v=n(28),w=n(11),T=n(20),g=n(12),x=n(21),D=n(38),S=n(39),I=n(40),O=n(41),N=n(42),E=n(13);function b(e,t,n){this.left=e,this.right=t,this.operator=n}function P(e,t){var n=i.atomize(e.left.evaluate(t),t);if(!n.length)return new s(!1);var o=i.atomize(e.right.evaluate(t),t);if(!o.length)return new s(!1);for(var a,u,l=!1,p=0,m=n.length;p<m&&!l;p++)for(var h,d,y=0,v=o.length;y<v&&!l;y++)u=n[p],h=(d=o[y])instanceof w,(a=u instanceof w)&&h?(u=c.cast(u),d=c.cast(d)):(a?d instanceof g?u=g.cast(u):d instanceof x?u=x.cast(u):d.primitiveKind&&(u=r.dataTypes[d.primitiveKind].cast(u)):h&&(u instanceof g?d=g.cast(d):u instanceof x?d=x.cast(d):u.primitiveKind&&(d=r.dataTypes[u.primitiveKind].cast(d))),u instanceof f&&(u=c.cast(u)),d instanceof f&&(d=c.cast(d))),l=F[R[e.operator]](u,d,t).valueOf();return new s(l)}b.prototype.left=null,b.prototype.right=null,b.prototype.operator=null,b.prototype.evaluate=function(e){var t=b.operators[this.operator](this,e);return null==t?[]:[t]};var R={"=":"eq","!=":"ne",">":"gt","<":"lt",">=":"ge","<=":"le"};function M(e,t){var n=i.atomize(e.left.evaluate(t),t);if(!n.length)return null;i.assertSequenceCardinality(n,t,"?","first operand of '"+e.operator+"'");var o=i.atomize(e.right.evaluate(t),t);if(!o.length)return null;i.assertSequenceCardinality(o,t,"?","second operand of '"+e.operator+"'");var r=n[0],a=o[0];return r instanceof w&&(r=c.cast(r)),a instanceof w&&(a=c.cast(a)),r instanceof f&&(r=c.cast(r)),a instanceof f&&(a=c.cast(a)),F[e.operator](r,a,t)}var F={};function A(e,t){var n=e.left.evaluate(t);if(!n.length)return null;i.assertSequenceCardinality(n,t,"?","first operand of '"+e.operator+"'"),i.assertSequenceItemType(n,t,E,"first operand of '"+e.operator+"'");var o=e.right.evaluate(t);return o.length?(i.assertSequenceCardinality(o,t,"?","second operand of '"+e.operator+"'"),i.assertSequenceItemType(o,t,E,"second operand of '"+e.operator+"'"),_[e.operator](n[0],o[0],t)):null}F.eq=function(e,t,n){var i="";if(a.isNumeric(e))a.isNumeric(t)&&(i="numeric-equal");else if(e instanceof s)t instanceof s&&(i="boolean-equal");else if(e instanceof c){if(t instanceof c)return r.operators["numeric-equal"].call(n,r.functions.compare.call(n,e,t),new u(0))}else e instanceof p?t instanceof p&&(i="date-equal"):e instanceof m?t instanceof m&&(i="time-equal"):e instanceof l?t instanceof l&&(i="dateTime-equal"):e instanceof T?t instanceof T&&(i="duration-equal"):e instanceof D?t instanceof D&&(i="gYearMonth-equal"):e instanceof S?t instanceof S&&(i="gYear-equal"):e instanceof O?t instanceof O&&(i="gMonthDay-equal"):e instanceof I?t instanceof I&&(i="gMonth-equal"):e instanceof N?t instanceof N&&(i="gDay-equal"):e instanceof h?t instanceof h&&(i="QName-equal"):e instanceof d?t instanceof d&&(i="hexBinary-equal"):e instanceof y?t instanceof y&&(i="base64Binary-equal"):e instanceof v&&t instanceof v&&(i="NOTATION-equal");if(i)return r.operators[i].call(n,e,t);throw new o("XPTY0004","Cannot compare values of given types")},F.ne=function(e,t,n){return new s(!F.eq(e,t,n).valueOf())},F.gt=function(e,t,n){var i="";if(a.isNumeric(e))a.isNumeric(t)&&(i="numeric-greater-than");else if(e instanceof s)t instanceof s&&(i="boolean-greater-than");else if(e instanceof c){if(t instanceof c)return r.operators["numeric-greater-than"].call(n,r.functions.compare.call(n,e,t),new u(0))}else e instanceof p?t instanceof p&&(i="date-greater-than"):e instanceof m?t instanceof m&&(i="time-greater-than"):e instanceof l?t instanceof l&&(i="dateTime-greater-than"):e instanceof x?t instanceof x&&(i="yearMonthDuration-greater-than"):e instanceof g&&t instanceof g&&(i="dayTimeDuration-greater-than");if(i)return r.operators[i].call(n,e,t);throw new o("XPTY0004","Cannot compare values of given types")},F.lt=function(e,t,n){var i="";if(a.isNumeric(e))a.isNumeric(t)&&(i="numeric-less-than");else if(e instanceof s)t instanceof s&&(i="boolean-less-than");else if(e instanceof c){if(t instanceof c)return r.operators["numeric-less-than"].call(n,r.functions.compare.call(n,e,t),new u(0))}else e instanceof p?t instanceof p&&(i="date-less-than"):e instanceof m?t instanceof m&&(i="time-less-than"):e instanceof l?t instanceof l&&(i="dateTime-less-than"):e instanceof x?t instanceof x&&(i="yearMonthDuration-less-than"):e instanceof g&&t instanceof g&&(i="dayTimeDuration-less-than");if(i)return r.operators[i].call(n,e,t);throw new o("XPTY0004","Cannot compare values of given types")},F.ge=function(e,t,n){var i="";if(a.isNumeric(e))a.isNumeric(t)&&(i="numeric-less-than");else if(e instanceof s)t instanceof s&&(i="boolean-less-than");else if(e instanceof c){if(t instanceof c)return r.operators["numeric-greater-than"].call(n,r.functions.compare.call(n,e,t),new u(-1))}else e instanceof p?t instanceof p&&(i="date-less-than"):e instanceof m?t instanceof m&&(i="time-less-than"):e instanceof l?t instanceof l&&(i="dateTime-less-than"):e instanceof x?t instanceof x&&(i="yearMonthDuration-less-than"):e instanceof g&&t instanceof g&&(i="dayTimeDuration-less-than");if(i)return new s(!r.operators[i].call(n,e,t).valueOf());throw new o("XPTY0004","Cannot compare values of given types")},F.le=function(e,t,n){var i="";if(a.isNumeric(e))a.isNumeric(t)&&(i="numeric-greater-than");else if(e instanceof s)t instanceof s&&(i="boolean-greater-than");else if(e instanceof c){if(t instanceof c)return r.operators["numeric-less-than"].call(n,r.functions.compare.call(n,e,t),new u(1))}else e instanceof p?t instanceof p&&(i="date-greater-than"):e instanceof m?t instanceof m&&(i="time-greater-than"):e instanceof l?t instanceof l&&(i="dateTime-greater-than"):e instanceof x?t instanceof x&&(i="yearMonthDuration-greater-than"):e instanceof g&&t instanceof g&&(i="dayTimeDuration-greater-than");if(i)return new s(!r.operators[i].call(n,e,t).valueOf());throw new o("XPTY0004","Cannot compare values of given types")};var _={is:function(e,t,n){return r.operators["is-same-node"].call(n,e,t)},">>":function(e,t,n){return r.operators["node-after"].call(n,e,t)},"<<":function(e,t,n){return r.operators["node-before"].call(n,e,t)}};b.operators={"=":P,"!=":P,"<":P,"<=":P,">":P,">=":P,eq:M,ne:M,lt:M,le:M,gt:M,ge:M,is:A,">>":A,"<<":A},b.vcOperators=F,e.exports=b},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=t.atob,c=t.String;function f(e){this.value=e}f.prototype=new a,f.prototype.builtInKind=i.HEXBINARY_DT,f.prototype.primitiveKind=r.PRIMITIVE_HEXBINARY,f.prototype.value=null,f.prototype.valueOf=function(){return this.value},f.prototype.toString=function(){return this.value};var l=/^([0-9a-fA-F]{2})*$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=function(e){return c(e).trim()}(e).match(l);if(t)return new f(t[0].toUpperCase());throw new o("FORG0001")}if(e instanceof cXSBase64Binary){for(var n,i=u(e.valueOf()),r=[],a=0,p=i.length;a<p;a++)n=i.charCodeAt(a).toString(16),r.push(new cArray(3-n.length).join("0")+n);return new f(r.join(""))}throw new o("XPTY0004","Casting value '"+e+"' to xs:hexBinary can never succeed")},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=t.btoa,c=t.parseInt,f=t.String;function l(e){this.value=e}l.prototype=new a,l.prototype.builtInKind=i.BASE64BINARY_DT,l.prototype.primitiveKind=r.PRIMITIVE_BASE64BINARY,l.prototype.value=null,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return this.value};var p=/^((([A-Za-z0-9+\/]\s*){4})*(([A-Za-z0-9+\/]\s*){3}[A-Za-z0-9+\/]|([A-Za-z0-9+\/]\s*){2}[AEIMQUYcgkosw048]\s*=|[A-Za-z0-9+\/]\s*[AQgw]\s*=\s*=))?$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){if(n=(t=e,f(t).trim()).match(p))return new l(n[0]);throw new o("FORG0001")}var t;if(e instanceof cXSHexBinary){for(var n,i=[],r=0,a=(n=e.valueOf().match(/.{2}/g)).length;r<a;r++)i.push(f.fromCharCode(c(n[r],16)));return new l(u(i.join("")))}throw new o("XPTY0004","Casting value '"+e+"' to xs:hexBinary can never succeed")},e.exports=l}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=n(10),c=t.String;function f(e,t,n){this.year=e,this.month=t,this.timezone=n}f.prototype=new a,f.prototype.builtInKind=i.GYEARMONTH_DT,f.prototype.primitiveKind=r.PRIMITIVE_GYEARMONTH,f.prototype.year=null,f.prototype.month=null,f.prototype.timezone=null,f.prototype.toString=function(){return u.pad(this.year)+"-"+u.pad(this.month)+u.getTZComponent(this)};var l=/^-?([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,c(n).trim()).match(l);if(t)return new f(+t[1],+t[2],t[3]?"Z"==t[3]?0:("-"==t[4]?-1:1)*(60*t[5]+1*t[6]):null);throw new o("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new f(e.year,e.month,e.timezone);throw new o("XPTY0004","Casting value '"+e+"' to xs:gYearMonth can never succeed")},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=n(10),c=t.String;function f(e,t){this.year=e,this.timezone=t}f.prototype=new a,f.prototype.builtInKind=i.GYEAR_DT,f.prototype.primitiveKind=r.PRIMITIVE_GYEAR,f.prototype.year=null,f.prototype.timezone=null,f.prototype.toString=function(){return u.pad(this.year)+u.getTZComponent(this)};var l=/^-?([1-9]\d\d\d+|0\d\d\d)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,c(n).trim()).match(l);if(t)return new f(+t[1],t[2]?"Z"==t[2]?0:("-"==t[3]?-1:1)*(60*t[4]+1*t[5]):null);throw new o("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new f(e.year,e.timezone);throw new o("XPTY0004","Casting value '"+e+"' to xs:gYear can never succeed")},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=n(10),c=t.String;function f(e,t){this.month=e,this.timezone=t}f.prototype=new a,f.prototype.builtInKind=i.GMONTH_DT,f.prototype.primitiveKind=r.PRIMITIVE_GMONTH,f.prototype.month=null,f.prototype.timezone=null,f.prototype.toString=function(){return"--"+u.pad(this.month)+u.getTZComponent(this)};var l=/^--(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,c(n).trim()).match(l);if(t)return new f(+t[1],t[2]?"Z"==t[2]?0:("-"==t[3]?-1:1)*(60*t[4]+1*t[5]):null);throw new o("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new f(e.month,e.timezone);throw new o("XPTY0004","Casting value '"+e+"' to xs:gMonth can never succeed")},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=n(10),c=t.String;function f(e,t,n){this.month=e,this.day=t,this.timezone=n}f.prototype=new a,f.prototype.builtInKind=i.GMONTHDAY_DT,f.prototype.primitiveKind=r.PRIMITIVE_GMONTHDAY,f.prototype.month=null,f.prototype.day=null,f.prototype.timezone=null,f.prototype.toString=function(){return"--"+u.pad(this.month)+"-"+u.pad(this.day)+u.getTZComponent(this)};var l=/^--(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(r=e,c(r).trim()).match(l);if(t){var n=+t[1],i=+t[2];if(i-1<u.getDaysForYearMonth(1976,n))return new f(n,i,t[3]?"Z"==t[3]?0:("-"==t[4]?-1:1)*(60*t[5]+1*t[6]):null);throw new o("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new o("FORG0001")}var r;if(e instanceof cXSDate||e instanceof u)return new f(e.month,e.day,e.timezone);throw new o("XPTY0004","Casting value '"+e+"' to xs:gMonthDay can never succeed")},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(3),u=n(10),c=t.String;function f(e,t){this.day=e,this.timezone=t}f.prototype=new a,f.prototype.builtInKind=i.GDAY_DT,f.prototype.primitiveKind=r.PRIMITIVE_GDAY,f.prototype.day=null,f.prototype.timezone=null,f.prototype.toString=function(){return"---"+u.pad(this.day)+u.getTZComponent(this)};var l=/^---(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,c(n).trim()).match(l);if(t)return new f(+t[1],t[2]?"Z"==t[2]?0:("-"==t[3]?-1:1)*(60*t[4]+1*t[5]):null);throw new o("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new f(e.day,e.timezone);throw new o("XPTY0004","Casting value '"+e+"' to xs:gDay can never succeed")},e.exports=f}).call(this,n(1))},function(e,t){function n(e){this.name=e,this.args=[]}n.prototype.name=null,n.prototype.args=null,n.names={},n.names["document-node"]={},n.names.element={},n.names.attribute={},n.names["processing-instruction"]={},n.names.comment={},n.names.text={},n.names.node={},n.names["schema-element"]={},n.names["schema-attribute"]={},n.prototype.test=function(e,t){var n,o=t.DOMAdapter.getProperty,i=t.DOMAdapter.isNode(e)?o(e,"nodeType"):0;switch(this.name){case"node":return!!i;case"attribute":if(2!=i)return!1;break;case"document-node":return 9==i;case"element":return 1==i;case"processing-instruction":if(7!=i)return!1;break;case"comment":return 8==i;case"text":return 3==i||4==i;case"schema-attribute":throw"KindTest 'schema-attribute' not implemented";case"schema-element":throw"KindTest 'schema-element' not implemented"}return 2==i?"xmlns"!=o(e,"prefix")&&"xmlns"!=o(e,"localName"):7!=i||(n=o(e,"nodeName"),this.args.length?n==this.args[0].value:"xml"!=n)},e.exports=n},function(e,t,n){var o=n(8),i=n(4);function r(){}r.prototype.predicates=null,r.prototype.applyPredicates=function(e,t){for(var n,r=t.item,a=t.position,s=t.size,u=0,c=this.predicates.length;u<c;u++){n=e,e=[];for(var f,l=0,p=n.length;l<p;l++)t.item=n[l],t.position=l+1,t.size=p,1==(f=this.predicates[u].evaluate(t)).length&&i.isNumeric(f[0])?f[0].valueOf()==l+1&&e.push(n[l]):o.toEBV(f,t)&&e.push(n[l])}return t.item=r,t.position=a,t.size=s,e},e.exports=r},function(e,t){function n(){}n.prototype.value=null,n.prototype.evaluate=function(e){return[this.value]},e.exports=n},function(e,t){function n(){}n.prototype.equals=function(e,t){throw"Not implemented"},n.prototype.compare=function(e,t){throw"Not implemented"},e.exports=n},function(e,t,n){(function(t){var o=n(2),i=n(24),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.NAME_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(3),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.NORMALIZEDSTRING_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){var o=n(0),i=n(2),r=(o=n(0),n(50)),a=n(5);function s(e){this.value=e}s.prototype=new r,s.prototype.builtInKind=i.SHORT_DT,s.cast=function(e){var t;try{t=a.cast(e)}catch(e){throw e}if(t.value<=32767&&t.value>=-32768)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(51);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.INT_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=2147483647&&t.value>=-2147483648)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5);function a(e){this.value=e}a.prototype=new r,a.prototype.builtInKind=i.LONG_DT,a.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=0x8000000000000000&&t.value>=-0x8000000000000000)return new a(t.value);throw new o("FORG0001")},e.exports=a},function(e,t,n){var o=n(0),i=n(2),r=n(5);function a(e){this.value=e}a.prototype=new r,a.prototype.builtInKind=i.NONPOSITIVEINTEGER_DT,a.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=0)return new a(t.value);throw new o("FORG0001")},e.exports=a},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(54);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.UNSIGNEDSHORT_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=65535)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(25);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.UNSIGNEDINT_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=4294967295)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){(function(t){var o=n(19).DynamicContext,i=n(19).Exception,r=n(19).Expression,a=n(29),s=n(56),u=n(136),c=n(137),f=n(138),l=n(139),p=t.document,m=p&&!!p.namespaces&&!p.createElementNS,h=p&&!m&&"http://www.w3.org/1999/xhtml"!=p.documentElement.namespaceURI;function d(e,t){try{this.staticContext=t,this.expression=new r(e,this.staticContext)}catch(e){throw e instanceof i?new a(a.INVALID_EXPRESSION_ERR,"[err:"+e.code+"] "+e.message):e}}d.prototype.evaluate=function(e,t,n){void 0===e&&(e=null);var r=[],p=u,d="http://www.w3.org/1999/xhtml"==this.staticContext.defaultElementNamespace;m?p=d?f:l:h&&d&&(p=c);try{for(var y,v=this.expression.evaluate(new o(this.staticContext,e,null,p)),w=0,T=v.length;w<T;w++)r[r.length]=p.isNode(y=v[w])?y:o.xs2js(y)}catch(e){throw e instanceof i?new a(a.TYPE_ERR,"[err:"+e.code+"] "+e.message):e}if(!t&&(t=4,r.length)){var g=typeof r[0];"number"==g?t=1:"string"==g?t=2:"boolean"==g&&(t=3)}return s.init(n?s.clear(n):new s,t,r)},e.exports=d}).call(this,n(1))},function(e,t,n){var o=n(29);function i(){}i.ANY_TYPE=0,i.NUMBER_TYPE=1,i.STRING_TYPE=2,i.BOOLEAN_TYPE=3,i.UNORDERED_NODE_ITERATOR_TYPE=4,i.ORDERED_NODE_ITERATOR_TYPE=5,i.UNORDERED_NODE_SNAPSHOT_TYPE=6,i.ORDERED_NODE_SNAPSHOT_TYPE=7,i.ANY_UNORDERED_NODE_TYPE=8,i.FIRST_ORDERED_NODE_TYPE=9,i.prototype.resultType=null,i.prototype.snapshotLength=0,i.prototype.numberValue=null,i.prototype.stringValue=null,i.prototype.booleanValue=null,i.prototype.singleNodeValue=null,i.prototype.invalidIteratorState=!1,i.prototype.current=0,i.prototype.iterateNext=function(){if(4==this.resultType||5==this.resultType)return this.current<this.sequence.length?this.sequence[this.current++]:null;throw new o(o.TYPE_ERR)},i.prototype.snapshotItem=function(e){if(6==this.resultType||7==this.resultType)return 0==arguments.length&&(e=0),e<this.sequence.length&&e>-1?this.sequence[e]:null;throw new o(o.TYPE_ERR)},i.init=function(e,t,n){switch(e.resultType&&i.clear(e),e.resultType=t,t){case 1:e.numberValue=n[0];break;case 2:e.stringValue=n[0];break;case 3:e.booleanValue=n[0];break;case 4:case 5:e.sequence=n;break;case 6:case 7:e.snapshotLength=n.length,e.sequence=n;break;case 8:case 9:e.singleNodeValue=n[0]}return e},i.clear=function(e){e.resultType=null,e.snapshotLength=0,e.numberValue=null,e.stringValue=null,e.booleanValue=null,e.singleNodeValue=null,e.invalidIteratorState=!1,e.current=0,e.sequence=null},e.exports=i},function(e,t){var n=function(){};n.prototype.nodeType=2,n.prototype.nodeName=n.prototype.nodeValue=n.prototype.ownerDocument=n.prototype.localName=n.prototype.namespaceURI=n.prototype.prefix=n.prototype.attributes=n.prototype.childNodes=n.prototype.firstChild=n.prototype.lastChild=n.prototype.previousSibling=n.prototype.nextSibling=n.prototype.parentNode=n.prototype.name=n.prototype.specified=n.prototype.value=n.prototype.ownerElement=null,e.exports=n},function(e,t,n){(function(t){var o=n(59),i=n(29),r=(n(55),n(56)),a=t.TypeError,s=new o;function u(e,t,n){return c(e,t,null,n)}function c(e,t,n,o){var i=s.evaluate(e,t,n,r.ANY_TYPE,null);return i.resultType==r.STRING_TYPE?i=i.stringValue:i.resultType==r.NUMBER_TYPE?i=i.numberValue:i.resultType==r.BOOLEAN_TYPE?i=i.booleanValue:(i=i.sequence,o&&(i=i[0])),i}e.exports={query:function(){throw new a("query() function is not supported yet.")},evaluate:function(){return s.evaluate.apply(s,arguments)},select:u,select1:function(e,t){return u(e,t,!0)},selectWithResolver:c,useNamespaces:function(e){var t={mappings:e||{},lookupNamespaceURI:function(e){return this.mappings[e]}};return function(e,n,o){return c(e,n,t,o)}},parse:function(e){throw new a("parse() function is not supported yet.")},XPathEvaluator:o,XPathResult:r,XPathException:i}}).call(this,n(1))},function(e,t,n){(function(t){var o=n(19).StaticContext,i=n(55),r=n(140),a=t.document,s=new o;s.baseURI=a?a.location.href:null,s.defaultFunctionNamespace="http://www.w3.org/2005/xpath-functions",s.defaultElementNamespace="http://www.w3.org/1999/xhtml";var u=new o;function c(){}u.defaultFunctionNamespace="http://www.w3.org/2005/xpath-functions",c.prototype.createExpression=function(e,t){return u.namespaceResolver=t,new i(e,u)},c.prototype.createNSResolver=function(e){return new r(e)},c.prototype.evaluate=function(e,t,n,o,r){var a=t&&t.nodeType&&"DIV"==(9==t.nodeType?t:t.ownerDocument).createElement("div").tagName?s:u;return a.namespaceResolver=n,new i(e,a).evaluate(t,o,r)},e.exports=c}).call(this,n(1))},function(e,t,n){(function(t){var o=n(30),i=n(10),r=n(12),a=n(4),s=n(3),u=n(14),c=n(15),f=n(7),l=n(5),p=t.Date,m=t.Math,h=t.Object,d=t.isNaN,y=t.isFinite;function v(e,t,n,a){this.staticContext=e,this.item=t,this.scope=n||{},this.stack={},this.DOMAdapter=a||new o;var s=new p,u=s.getTimezoneOffset();this.dateTime=new i(s.getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()+s.getMilliseconds()/1e3,-u),this.timezone=new r(0,m.abs(~~(u/60)),m.abs(u%60),0,u>0)}v.prototype.item=null,v.prototype.position=0,v.prototype.size=0,v.prototype.scope=null,v.prototype.stack=null,v.prototype.dateTime=null,v.prototype.timezone=null,v.prototype.staticContext=null,v.prototype.pushVariable=function(e,t){h.hasOwnProperty.call(this.stack,e)||(this.stack[e]=[]),this.stack[e].push(this.scope[e]),this.scope[e]=t},v.prototype.popVariable=function(e){h.hasOwnProperty.call(this.stack,e)&&(this.scope[e]=this.stack[e].pop(),this.stack[e].length||(delete this.stack[e],void 0===this.scope[e]&&delete this.scope[e]))},v.js2xs=function(e){var t;return"boolean"==typeof e?t=f:"number"==typeof e&&(t=d(e)||!y(e)||/e/i.test(e)?u:e%1?c:l),t?new t(e):new s(e.toString())},v.xs2js=function(e){return e=e instanceof f||a.isNumeric(e)?e.valueOf():e.toString()},e.exports=v}).call(this,n(1))},function(e,t,n){var o=n(62),i=n(0),r=n(63);function a(e,t){var n=new o(e),a=r(n,t);if(!n.eof())throw new i("XPST0003","Unexpected token beyond end of query");if(!a)throw new i("XPST0003","Expected expression");this.internalExpression=a}a.prototype.internalExpression=null,a.prototype.evaluate=function(e){return this.internalExpression.evaluate(e)},e.exports=a},function(e,t,n){var o=n(0);function i(e){var t=e.match(/\$?(?:(?![0-9-])(?:\w[\w.-]*|\*):)?(?![0-9-])(?:\w[\w.-]*|\*)|\(:|:\)|\/\/|\.\.|::|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?|\.\d+(?:[eE][+-]?\d+)?|"[^"]*(?:""[^"]*)*"|'[^']*(?:''[^']*)*'|<<|>>|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g);if(t){for(var n=0,i=0,r=t.length;i<r;i++)"(:"==t[i]?n++:":)"==t[i]&&n?n--:n||/^\s/.test(t[i])||(this[this.length++]=t[i]);if(n)throw new o("XPST0003","Unclosed comment")}}i.prototype.index=0,i.prototype.length=0,i.prototype.reset=function(){this.index=0},i.prototype.peek=function(e){return this[this.index+(e||0)]||""},i.prototype.next=function(e){return(this.index+=e||1)<this.length},i.prototype.back=function(e){return(this.index-=e||1)>0},i.prototype.eof=function(){return this.index>=this.length},e.exports=i},function(e,t,n){var o=n(0),i=n(9),r=n(3),a=n(14),s=n(15),u=n(5),c=n(64),f=n(31),l=n(34),p=n(70),m=n(35),h=n(71),d=n(72),y=n(73),v=n(74),w=n(75),T=n(43),g=n(76),x=n(77),D=n(78),S=n(79),I=n(80),O=n(81),N=n(82),E=n(83),b=n(84),P=n(85),R=n(86),M=n(87),F=n(88),A=n(89),_=n(90),X=n(91),Y=n(92),z=n(93),U=n(94),C=n(95),q=n(96),k=n(97),G=n(98),V=/^(?:(?![0-9-])(\w[\w.-]*|\*):)?(?![0-9-])(\w[\w.-]*|\*)$/;function K(e,t){var n;if(!e.eof()&&(n=B(e,t))){var i=new c;for(i.items.push(n);","==e.peek();){if(e.next(),e.eof()||!(n=B(e,t)))throw new o("XPST0003","Expected expression");i.items.push(n)}return i}}function B(e,t){return function(e,t){var n,i,r;if("if"==e.peek()&&"("==e.peek(1)){if(e.next(2),e.eof()||!(n=K(e,t)))throw new o("XPST0003","Expected if statement operand in conditional expression");if(")"!=e.peek())throw new o("XPST0003","Expected ')' token in for expression");if(e.next(),"then"!=e.peek())throw new o("XPST0003","Expected 'then' token in conditional if expression");if(e.next(),e.eof()||!(i=B(e,t)))throw new o("XPST0003","Expected then statement operand in conditional expression");if("else"!=e.peek())throw new o("XPST0003","Expected 'else' token in conditional if expression");if(e.next(),e.eof()||!(r=B(e,t)))throw new o("XPST0003","Expected else statement operand in conditional expression");return new y(n,i,r)}}(e,t)||function(e,t){if("for"==e.peek()&&"$"==e.peek(1).substr(0,1)){e.next();var n,i=new h;do{i.bindings.push(Q(e,t))}while(","==e.peek()&&e.next());if("return"!=e.peek())throw new o("XPST0003","Expected 'return' token in for expression");if(e.next(),e.eof()||!(n=B(e,t)))throw new o("XPST0003","Expected return statement operand in for expression");return i.returnExpr=n,i}}(e,t)||function(e,t){var n=e.peek();if(("some"==n||"every"==n)&&"$"==e.peek(1).substr(0,1)){e.next();var i,r=new R(n);do{r.bindings.push(ae(e,t))}while(","==e.peek()&&e.next());if("satisfies"!=e.peek())throw new o("XPST0003","Expected 'satisfies' token in quantified expression");if(e.next(),e.eof()||!(i=B(e,t)))throw new o("XPST0003","Expected satisfies statement operand in quantified expression");return r.satisfiesExpr=i,r}}(e,t)||function(e,t){var n;if(e.eof()||!(n=$(e,t)))return;if("or"!=e.peek())return n;var i=new w(n);for(;"or"==e.peek();){if(e.next(),e.eof()||!(n=$(e,t)))throw new o("XPST0003","Expected second operand in logical expression");i.items.push(n)}return i}(e,t)}function L(e,t){var n;if(!e.eof()&&(n=j(e,t))){if(!(e.peek()in f.operators))return n;for(var i,r=new f(n);(i=e.peek())in f.operators;){if(e.next(),e.eof()||!(n=j(e,t)))throw new o("XPST0003","Expected second operand in additive expression");r.items.push([i,n])}return r}}function j(e,t){var n;if(!e.eof()&&(n=ce(e,t))){if(!(e.peek()in l.operators))return n;for(var i,r=new l(n);(i=e.peek())in l.operators;){if(e.next(),e.eof()||!(n=ce(e,t)))throw new o("XPST0003","Expected second operand in multiplicative expression");r.items.push([i,n])}return r}}function H(e,t){return function(e,t){if(e.eof())return;var n,r=new D,a=e.peek();"//"!=a&&"/"!=a||(e.next(),r.items.push(new O(null,"root",i.NS_XPF)),"//"==a&&r.items.push(new x("descendant-or-self",new T("node"))));if(e.eof()||!(n=te(e,t))){if("/"==a)return r.items[0];if("//"==a)throw new o("XPST0003","Expected path step expression");return}r.items.push(n);for(;"/"==(a=e.peek())||"//"==a;){if("//"==a&&r.items.push(new x("descendant-or-self",new T("node"))),e.next(),e.eof()||!(n=te(e,t)))throw new o("XPST0003","Expected path step expression");r.items.push(n)}return 1==r.items.length?r.items[0]:r}(e,t)}function Z(e,t){var n,i;if(!e.eof()&&(n=ue(e,t))){if(!(e.peek()in m.operators))return n;var r=e.peek();if(e.next(),e.eof()||!(i=ue(e,t)))throw new o("XPST0003","Expected second operand in comparison expression");return new m(n,i,r)}}function Q(e,t){var n,i=e.peek().substr(1).match(V);if(!i)throw new o("XPST0003","Expected binding in for expression");if("*"==i[1]||"*"==i[2])throw new o("XPST0003","Illegal use of wildcard in for expression binding variable name");if(e.next(),"in"!=e.peek())throw new o("XPST0003","Expected 'in' token in for expression binding");if(e.next(),e.eof()||!(n=B(e,t)))throw new o("XPST0003","Expected in statement operand in for expression binding");return new d(i[1]||null,i[2],i[1]?t.getURIForPrefix(i[1]):null,n)}function $(e,t){var n;if(!e.eof()&&(n=Z(e,t))){if("and"!=e.peek())return n;for(var i=new v(n);"and"==e.peek();){if(e.next(),e.eof()||!(n=Z(e,t)))throw new o("XPST0003","Expected second operand in logical expression");i.items.push(n)}return i}}function W(e,t){var n,i=e.peek();if("("==e.peek(1)){if(!(i in T.names))throw new o("XPST0003","Unknown '"+i+"' kind test");e.next(2);var a=new T(i);if(")"!=e.peek())"document-node"==i||"element"==i||"attribute"==i||"processing-instruction"==i&&((n=re(e,t))||(n=new b(new r(e.peek())),e.next()),a.args.push(n));else{if("schema-attribute"==i)throw new o("XPST0003","Expected attribute declaration in 'schema-attribute' kind test");if("schema-element"==i)throw new o("XPST0003","Expected element declaration in 'schema-element' kind test")}if(")"!=e.peek())throw new o("XPST0003","Expected ')' token in kind test");return e.next(),a}}function J(e,t){if(!e.eof())return W(e,t)||function(e,t){var n=e.peek().match(V);if(n){if("*"==n[1]&&"*"==n[2])throw new o("XPST0003","Illegal use of *:* wildcard in name test");return e.next(),new g(n[1]||null,n[2],n[1]?"*"==n[1]?"*":t.getURIForPrefix(n[1])||null:t.defaultElementNamespace)}}(e,t)}function ee(e,t){var n,i,r=e.peek();if("::"==e.peek(1)){if(!(r in x.axises))throw new o("XPST0003","Unknown axis name: "+r);if(e.next(2),e.eof()||!(n=J(e,t)))throw new o("XPST0003","Expected node test expression in axis step");i=new x(r,n)}else if(".."==r)e.next(),i=new x("parent",new T("node"));else if("@"==r){if(e.next(),e.eof()||!(n=J(e,t)))throw new o("XPST0003","Expected node test expression in axis step");i=new x("attribute",n)}else{if(e.eof()||!(n=J(e,t)))return;i=new x(n instanceof T&&"attribute"==n.name?"attribute":"child",n)}return ne(e,t,i),i}function te(e,t){if(!e.eof())return function(e,t){var n;if(e.eof()||!(n=function(e,t){if(!e.eof())return function(e,t){if("."==e.peek())return e.next(),new S}(e)||function(e,t){if("("==e.peek()){e.next();var n=null;if(")"!=e.peek()&&(n=K(e,t)),")"!=e.peek())throw new o("XPST0003","Expected ')' token in parenthesized expression");return e.next(),new E(n)}}(e,t)||function(e,t){var n=e.peek().match(V);if(n&&"("==e.peek(1)){if(!n[1]&&n[2]in T.names)return ee(e,t);if("*"==n[1]||"*"==n[2])throw new o("XPST0003","Illegal use of wildcard in function name");var i,r=new O(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1])||null:t.defaultFunctionNamespace);if(e.next(2),")"!=e.peek()){do{if(e.eof()||!(i=B(e,t)))throw new o("XPST0003","Expected function call argument");r.args.push(i)}while(","==e.peek()&&e.next());if(")"!=e.peek())throw new o("XPST0003","Expected ')' token in function call")}return e.next(),r}}(e,t)||function(e,t){if("$"==e.peek().substr(0,1)){var n=e.peek().substr(1).match(V);if(n){if("*"==n[1]||"*"==n[2])throw new o("XPST0003","Illegal use of wildcard in var expression variable name");var i=new P(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null);return e.next(),i}}}(e,t)||function(e,t){if(!e.eof())return function(e,t){var n=e.peek(),o=n.match(oe);if(o){var i=u;return o[5]?i=a:(o[2]||o[3])&&(i=s),e.next(),new N(new i(+n))}}(e)||re(e,t)}(e,t)}(e,t)))return;var i=new I(n);return ne(e,t,i),0==i.predicates.length?i.expression:i}(e,t)||ee(e,t)}function ne(e,t,n){for(var i;"["==e.peek();){if(e.next(),e.eof()||!(i=K(e,t)))throw new o("XPST0003","Expected expression in predicate");if(n.predicates.push(i),"]"!=e.peek())throw new o("XPST0003","Expected ']' token in predicate");e.next()}}var oe=/^[+-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;var ie=/^'([^']*(?:''[^']*)*)'|"([^"]*(?:""[^"]*)*)"$/;function re(e,t){var n=e.peek().match(ie);if(n)return e.next(),new b(new r(n[1]?n[1].replace("''","'"):n[2]?n[2].replace('""','"'):""))}function ae(e,t){var n,i=e.peek().substr(1).match(V);if(!i)throw new o("XPST0003","Expected binding in quantified expression");if("*"==i[1]||"*"==i[2])throw new o("XPST0003","Illegal use of wildcard in quantified expression binding variable name");if(e.next(),"in"!=e.peek())throw new o("XPST0003","Expected 'in' token in quantified expression binding");if(e.next(),e.eof()||!(n=B(e,t)))throw new o("XPST0003","Expected in statement operand in quantified expression binding");return new M(i[1]||null,i[2],i[1]?t.getURIForPrefix(i[1]):null,n)}function se(e,t){var n,i;if(!e.eof()&&(n=he(e,t))){if("intersect"!=(i=e.peek())&&"except"!=i)return n;for(var r=new F(n);"intersect"==(i=e.peek())||"except"==i;){if(e.next(),e.eof()||!(n=he(e,t)))throw new o("XPST0003","Expected second operand in "+i+" expression");r.items.push([i,n])}return r}}function ue(e,t){var n,i;if(!e.eof()&&(n=L(e,t))){if("to"!=e.peek())return n;if(e.next(),e.eof()||!(i=L(e,t)))throw new o("XPST0003","Expected second operand in range expression");return new A(n,i)}}function ce(e,t){var n,i;if(!e.eof()&&(n=se(e,t))){if("|"!=(i=e.peek())&&"union"!=i)return n;for(var r=new _(n);"|"==(i=e.peek())||"union"==i;){if(e.next(),e.eof()||!(n=se(e,t)))throw new o("XPST0003","Expected second operand in union expression");r.items.push(n)}return r}}function fe(e,t){var n=e.peek().match(V);if(n){if("*"==n[1]||"*"==n[2])throw new o("XPST0003","Illegal use of wildcard in type name");return e.next(),new X(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null)}}function le(e,t){if(!e.eof()){if("empty-sequence"==e.peek()&&"("==e.peek(1)){if(e.next(2),")"!=e.peek())throw new o("XPST0003","Expected ')' token in sequence type");return e.next(),new z}var n,i;return!e.eof()&&(n=function(e,t){if(!e.eof()){var n;if("item"==e.peek()&&"("==e.peek(1)){if(e.next(2),")"!=e.peek())throw new o("XPST0003","Expected ')' token in item type expression");return e.next(),new Y}return(n=W(e,t))||(n=fe(e,t))?new Y(n):void 0}}(e,t))?("?"==(i=e.peek())||"*"==i||"+"==i?e.next():i=null,new z(n,i)):void 0}}function pe(e,t){var n,o;if(!e.eof()&&(n=fe(e,t)))return"?"==(o=e.peek())?e.next():o=null,new U(n,o)}function me(e,t){var n,i;if(!e.eof()&&(n=function(e,t){var n,i;if(e.eof()||!(n=function(e,t){if(!e.eof()){if(!(e.peek()in p.operators))return H(e,t);for(var n,i="+";e.peek()in p.operators;)"-"==e.peek()&&(i="-"==i?"+":"-"),e.next();if(e.eof()||!(n=H(e,t)))throw new o("XPST0003","Expected operand in unary expression");return new p(i,n)}}(e,t)))return;if("cast"!=e.peek()||"as"!=e.peek(1))return n;if(e.next(2),e.eof()||!(i=pe(e,t)))throw new o("XPST0003","Expected second operand in cast expression");return new q(n,i)}(e,t))){if("castable"!=e.peek()||"as"!=e.peek(1))return n;if(e.next(2),e.eof()||!(i=pe(e,t)))throw new o("XPST0003","Expected second operand in castable expression");return new C(n,i)}}function he(e,t){var n,i;if(!e.eof()&&(n=function(e,t){var n,i;if(e.eof()||!(n=me(e,t)))return;if("treat"!=e.peek()||"as"!=e.peek(1))return n;if(e.next(2),e.eof()||!(i=le(e,t)))throw new o("XPST0003","Expected second operand in treat expression");return new G(n,i)}(e,t))){if("instance"!=e.peek()||"of"!=e.peek(1))return n;if(e.next(2),e.eof()||!(i=le(e,t)))throw new o("XPST0003","Expected second operand in instance of expression");return new k(n,i)}}e.exports=K},function(e,t,n){var o=n(9);function i(){this.items=[]}i.prototype.items=null,i.prototype.evaluate=function(e){for(var t=[],n=0,i=this.items.length;n<i;n++)t=o.operators.concatenate.call(e,t,this.items[n].evaluate(e));return t},e.exports=i},function(e,t,n){var o=n(13);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(13);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(13);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(13);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(13);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(0),i=n(8),r=n(9),a=n(4),s=n(11);function u(e,t){this.operator=e,this.expression=t}u.prototype.operator=null,u.prototype.expression=null,u.operators={},u.operators["-"]=function(e,t){if(a.isNumeric(e))return r.operators["numeric-unary-minus"].call(t,e);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},u.operators["+"]=function(e,t){if(a.isNumeric(e))return r.operators["numeric-unary-plus"].call(t,e);throw new o("XPTY0004","Arithmetic operator is not defined for provided arguments")},u.prototype.evaluate=function(e){var t=i.atomize(this.expression.evaluate(e),e);if(!t.length)return[];i.assertSequenceCardinality(t,e,"?","second operand of '"+this.operator+"'");var n=t[0];return n instanceof s&&(n=cXSDouble.cast(n)),[u.operators[this.operator](n,e)]},e.exports=u},function(e,t){function n(){this.bindings=[],this.returnExpr=null}n.prototype.bindings=null,n.prototype.returnExpr=null,n.prototype.evaluate=function(e){var t=[];return function(n,o){for(var i=n.bindings[o++],r=i.inExpr.evaluate(e),a=(i.namespaceURI?"{"+i.namespaceURI+"}":"")+i.localName,s=0,u=r.length;s<u;s++)e.pushVariable(a,r[s]),o<n.bindings.length?arguments.callee(n,o):t=t.concat(n.returnExpr.evaluate(e)),e.popVariable(a)}(this,0),t},e.exports=n},function(e,t){function n(e,t,n,o){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=o}n.prototype.prefix=null,n.prototype.localName=null,n.prototype.namespaceURI=null,n.prototype.inExpr=null,e.exports=n},function(e,t,n){var o=n(8);function i(e,t,n){this.condExpr=e,this.thenExpr=t,this.elseExpr=n}i.prototype.condExpr=null,i.prototype.thenExpr=null,i.prototype.elseExpr=null,i.prototype.evaluate=function(e){return this[o.toEBV(this.condExpr.evaluate(e),e)?"thenExpr":"elseExpr"].evaluate(e)},e.exports=i},function(e,t,n){var o=n(8),i=n(7);function r(e){this.left=e,this.items=[]}r.prototype.left=null,r.prototype.items=null,r.prototype.evaluate=function(e){for(var t=o.toEBV(this.left.evaluate(e),e),n=0,r=this.items.length;n<r&&t;n++)t=o.toEBV(this.items[n].evaluate(e),e);return[new i(t)]},e.exports=r},function(e,t,n){var o=n(8),i=n(7);function r(e){this.left=e,this.items=[]}r.prototype.left=null,r.prototype.items=null,r.prototype.evaluate=function(e){for(var t=o.toEBV(this.left.evaluate(e),e),n=0,r=this.items.length;n<r&&!t;n++)t=o.toEBV(this.items[n].evaluate(e),e);return[new i(t)]},e.exports=r},function(e,t){function n(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}n.prototype.prefix=null,n.prototype.localName=null,n.prototype.namespaceURI=null,n.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,o=n(e,"nodeType");if(1==o||2==o){if("*"==this.localName)return(1==o||"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"))&&(!this.prefix||n(e,"namespaceURI")==this.namespaceURI);if(this.localName==n(e,"localName"))return"*"==this.namespaceURI||2==o&&!this.prefix&&!n(e,"prefix")||n(e,"namespaceURI")==this.namespaceURI}return!1},e.exports=n},function(e,t,n){var o=n(0),i=n(44),r=n(43);function a(e,t){this.axis=e,this.test=t,this.predicates=[]}function s(e,t,n){for(var o;e;e=n(e,"nextSibling"))t.push(e),(o=n(e,"firstChild"))&&s(o,t,n)}function u(e,t,n){for(var o;e;e=n(e,"previousSibling"))(o=n(e,"lastChild"))&&u(o,t,n),t.push(e)}a.prototype=new i,a.prototype.axis=null,a.prototype.test=null,a.axises={},a.axises.attribute={},a.axises.child={},a.axises.descendant={},a.axises["descendant-or-self"]={},a.axises.following={},a.axises["following-sibling"]={},a.axises.self={},a.axises.ancestor={},a.axises["ancestor-or-self"]={},a.axises.parent={},a.axises.preceding={},a.axises["preceding-sibling"]={},a.prototype.evaluate=function(e){var t=e.item;if(!e.DOMAdapter.isNode(t))throw new o("XPTY0020");var n=[],i=e.DOMAdapter.getProperty,a=i(t,"nodeType");switch(this.axis){case"attribute":if(1==a)for(var c=i(t,"attributes"),f=0,l=c.length;f<l;f++)n.push(c[f]);break;case"child":for(var p=i(t,"firstChild");p;p=i(p,"nextSibling"))n.push(p);break;case"descendant-or-self":n.push(t);case"descendant":s(i(t,"firstChild"),n,i);break;case"following":for(var m=t;m;m=i(m,"parentNode"))(h=i(m,"nextSibling"))&&s(h,n,i);break;case"following-sibling":for(p=t;p=i(p,"nextSibling");)n.push(p);break;case"self":n.push(t);break;case"ancestor-or-self":n.push(t);case"ancestor":for(p=2==a?i(t,"ownerElement"):t;p=i(p,"parentNode");)n.push(p);break;case"parent":(m=i(t,2==a?"ownerElement":"parentNode"))&&n.push(m);break;case"preceding":var h;for(m=t;m;m=i(m,"parentNode"))(h=i(m,"previousSibling"))&&u(h,n,i);break;case"preceding-sibling":for(p=t;p=i(p,"previousSibling");)n.push(p)}if(n.length&&!(this.test instanceof r&&"node"==this.test.name)){var d=n;n=[];for(f=0,l=d.length;f<l;f++)this.test.test(d[f],e)&&n.push(d[f])}switch(n.length&&this.predicates.length&&(n=this.applyPredicates(n,e)),this.axis){case"ancestor":case"ancestor-or-self":case"parent":case"preceding":case"preceding-sibling":n.reverse()}return n},e.exports=a},function(e,t,n){var o=n(0),i=n(8);function r(){this.items=[]}r.prototype.items=null,r.prototype.evaluate=function(e){for(var t,n,r,a=e.item,s=[a],u=0,c=this.items.length;u<c;u++){t=[];for(var f=0,l=s.length;f<l;f++){e.item=s[f];for(var p=0,m=this.items[u].evaluate(e),h=m.length;p<h;p++){if(u<c-1&&!e.DOMAdapter.isNode(m[p]))throw new o("XPTY0019");-1==(n=t,r=m[p],n.indexOf(r))&&t.push(m[p])}}s=t}return e.item=a,i.order(s,e)},e.exports=r},function(e,t,n){var o=n(0);function i(){}i.prototype.evaluate=function(e){if(null==e.item)throw new o("XPDY0002","Dynamic context does not have context item initialized");return[e.item]},e.exports=i},function(e,t,n){var o=n(44);function i(e){this.expression=e,this.predicates=[]}i.prototype=new o,i.prototype.expression=null,i.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.predicates.length&&t.length&&(t=this.applyPredicates(t,e)),t},e.exports=i},function(e,t,n){(function(t){var o=n(0),i=n(8),r=n(9),a=n(4),s=t.Array;function u(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n,this.args=[]}u.prototype.prefix=null,u.prototype.localName=null,u.prototype.namespaceURI=null,u.prototype.args=null,u.prototype.evaluate=function(e){for(var t,n,i=[],u=0,c=this.args.length;u<c;u++)i.push(this.args[u].evaluate(e));var l=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(this.namespaceURI==r.NS_XPF){var p;if(n=r.functions[this.localName])return(t=r.signatures[this.localName])&&f(this.localName,t,i,e),null==(p=n.apply(e,i))?[]:p instanceof s?p:[p];throw new o("XPST0017","Unknown system function: "+l+"()")}if(this.namespaceURI==r.NS_XSD){if((n=r.dataTypes[this.localName])&&"NOTATION"!=this.localName&&"anyAtomicType"!=this.localName)return f(this.localName,[[a,"?"]],i,e),null===i[0]?[]:[n.cast(i[0])];throw new o("XPST0017","Unknown type constructor function: "+l+"()")}if(n=e.staticContext.getFunction(l))return null==(p=n.apply(e,i))?[]:p instanceof s?p:[p];throw new o("XPST0017","Unknown user function: "+l+"()")};var c=["first","second","third","fourth","fifth"];function f(e,t,n,r){for(var a,s,u=n.length,f=t.length,l=0;l<t.length&&!t[l][2];)l++;if(u>f)throw new o("XPST0017","Function "+e+"() must have "+(f?" no more than ":"")+f+" argument"+(f>1||!f?"s":""));if(u<l)throw new o("XPST0017","Function "+e+"() must have "+(l==f?"exactly":"at least")+" "+l+" argument"+(f>1?"s":""));for(var p=0;p<u;p++)s=t[p],a=n[p],i.assertSequenceCardinality(a,r,s[1],c[p]+" argument of "+e+"()"),i.assertSequenceItemType(a,r,s[0],c[p]+" argument of "+e+"()"),"+"!=s[1]&&"*"!=s[1]&&(n[p]=a.length?a[0]:null)}e.exports=u}).call(this,n(1))},function(e,t,n){var o=n(45);function i(e){this.value=e}i.prototype=new o,e.exports=i},function(e,t){function n(e){this.expression=e}n.prototype.evaluate=function(e){return this.expression?this.expression.evaluate(e):[]},e.exports=n},function(e,t,n){var o=n(45);function i(e){this.value=e}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(0);function i(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}i.prototype.prefix=null,i.prototype.localName=null,i.prototype.namespaceURI=null,i.prototype.evaluate=function(e){var t=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(e.scope.hasOwnProperty(t))return[e.scope[t]];throw new o("XPST0008","Variable $"+(this.prefix?this.prefix+":":"")+this.localName+" has not been declared")},e.exports=i},function(e,t,n){var o=n(7),i=n(8);function r(e){this.quantifier=e,this.bindings=[],this.satisfiesExpr=null}r.prototype.bindings=null,r.prototype.quantifier=null,r.prototype.satisfiesExpr=null,r.prototype.evaluate=function(e){var t="every"==this.quantifier,n=!!t;return function(o,r){for(var a=o.bindings[r++],s=a.inExpr.evaluate(e),u=(a.namespaceURI?"{"+a.namespaceURI+"}":"")+a.localName,c=0,f=s.length;c<f&&(t?n:!n);c++)e.pushVariable(u,s[c]),r<o.bindings.length?arguments.callee(o,r):n=i.toEBV(o.satisfiesExpr.evaluate(e),e),e.popVariable(u)}(this,0),[new o(n)]},e.exports=r},function(e,t){function n(e,t,n,o){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=o}n.prototype.prefix=null,n.prototype.localName=null,n.prototype.namespaceURI=null,n.prototype.inExpr=null,e.exports=n},function(e,t,n){var o=n(9);function i(e){this.left=e,this.items=[]}i.prototype.left=null,i.prototype.items=null,i.prototype.evaluate=function(e){for(var t,n=this.left.evaluate(e),i=0,r=this.items.length;i<r;i++)n=o.operators[(t=this.items[i])[0]].call(e,n,t[1].evaluate(e));return n},e.exports=i},function(e,t,n){n(0);var o=n(8),i=n(9),r=n(5);function a(e,t){this.left=e,this.right=t}a.prototype.left=null,a.prototype.right=null,a.prototype.evaluate=function(e){var t=this.left.evaluate(e);if(!t.length)return[];var n="first operand of 'to'";o.assertSequenceCardinality(t,e,"?",n),o.assertSequenceItemType(t,e,r,n);var a=this.right.evaluate(e);return a.length?(n="second operand of 'to'",o.assertSequenceCardinality(a,e,"?",n),o.assertSequenceItemType(a,e,r,n),i.operators.to.call(e,t[0],a[0])):[]},e.exports=a},function(e,t,n){var o=n(9);function i(e){this.left=e,this.items=[]}i.prototype.left=null,i.prototype.items=null,i.prototype.evaluate=function(e){for(var t=this.left.evaluate(e),n=0,i=this.items.length;n<i;n++)t=o.operators.union.call(e,t,this.items[n].evaluate(e));return t},e.exports=i},function(e,t,n){var o=n(9),i=n(0);function r(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}r.prototype.prefix=null,r.prototype.localName=null,r.prototype.namespaceURI=null,r.prototype.test=function(e,t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,r=this.namespaceURI==o.NS_XSD?o.dataTypes[this.localName]:t.staticContext.getDataType(n);if(r)return e instanceof r;throw new i("XPST0051","Unknown simple type "+(this.prefix?this.prefix+":":"")+this.localName)},r.prototype.cast=function(e,t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,r=this.namespaceURI==o.NS_XSD?o.dataTypes[this.localName]:t.staticContext.getDataType(n);if(r)return r.cast(e);throw new i("XPST0051","Unknown atomic type "+(this.prefix?this.prefix+":":"")+this.localName)},e.exports=r},function(e,t){function n(e){this.test=e}n.prototype.test=null,e.exports=n},function(e,t){function n(e,t){this.itemType=e||null,this.occurence=t||null}n.prototype.itemType=null,n.prototype.occurence=null,e.exports=n},function(e,t){function n(e,t){this.itemType=e||null,this.occurence=t||null}n.prototype.itemType=null,n.prototype.occurence=null,e.exports=n},function(e,t,n){var o=n(0),i=n(8),r=n(7);function a(e,t){this.expression=e,this.type=t}a.prototype.expression=null,a.prototype.type=null,a.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,a=this.type.occurence;if(t.length>1)return[new r(!1)];if(!t.length)return[new r("?"==a)];try{n.cast(i.atomize(t,e)[0])}catch(e){if(!(e instanceof o))throw e;if("XPST0051"==e.code)throw e;if("XPST0017"==e.code)throw new o("XPST0080","No value is castable to "+(n.prefix?n.prefix+":":"")+n.localName);return[new r(!1)]}return[new r(!0)]},e.exports=a},function(e,t,n){var o=n(8);function i(e,t){this.expression=e,this.type=t}i.prototype.expression=null,i.prototype.type=null,i.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return o.assertSequenceCardinality(t,e,this.type.occurence,"'cast as' expression operand"),t.length?[this.type.itemType.cast(o.atomize(t,e)[0],e)]:[]},e.exports=i},function(e,t,n){var o=n(7);function i(e,t){this.expression=e,this.type=t}i.prototype.expression=null,i.prototype.type=null,i.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,i=this.type.occurence;if(!n)return[new o(!t.length)];if(!t.length)return[new o("?"==i||"*"==i)];if(1!=t.length&&"+"!=i&&"*"!=i)return[new o(!1)];if(!n.test)return[new o(!0)];for(var r=!0,a=0,s=t.length;a<s&&r;a++)r=n.test.test(t[a],e);return[new o(r)]},e.exports=i},function(e,t,n){var o=n(0);function i(e,t){this.expression=e,this.type=t}i.prototype.expression=null,i.prototype.type=null,i.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,i=this.type.occurence;if(!n){if(t.length)throw new o("XPDY0050","The only value allowed for the value in 'treat as' expression is an empty sequence");return t}if("?"!=i&&"*"!=i&&!t.length)throw new o("XPDY0050","An empty sequence is not allowed as the value in 'treat as' expression");if("+"!=i&&"*"!=i&&1!=t.length)throw new o("XPDY0050","A sequence of more than one item is not allowed as the value in 'treat as' expression");if(!n.test)return t;for(var r=0,a=t.length;r<a;r++)if(!n.test.test(t[r],e))throw new o("XPDY0050","Required item type of value in 'treat as' expression is "+(n.test.prefix?n.test.prefix+":":"")+n.test.localName);return t},e.exports=i},function(e,t,n){var o=n(9),i=n(100),r=n(101),a=n(102),s=n(103),u=n(104),c=n(105),f=n(106),l=n(107),p=n(108),m=n(109),h=n(110),d=n(4),y=n(3),v=n(17),w=n(18),T=n(10),g=n(20),x=n(12),D=n(22),S=n(14),I=n(5),O=n(32),N=n(13),E=n(33);o.defineSystemFunction("node-name",[[N,"?"]],i.nodeName),o.defineSystemFunction("nilled",[[N,"?"]],i.nilled),o.defineSystemFunction("string",[[O,"?",!0]],i.string),o.defineSystemFunction("data",[[O,"*"]],i.data),o.defineSystemFunction("base-uri",[[N,"?",!0]],i.baseUri),o.defineSystemFunction("document-uri",[[N,"?"]],i.documentUri),o.defineSystemFunction("resolve-uri",[[y,"?"],[y,"",!0]],r.resolveUri),o.defineSystemFunction("true",[],a.true),o.defineSystemFunction("false",[],a.false),o.defineSystemFunction("not",[[O,"*"]],a.not),o.defineSystemFunction("position",[],s.position),o.defineSystemFunction("last",[],s.last),o.defineSystemFunction("current-dateTime",[],s.currentDateTime),o.defineSystemFunction("current-date",[],s.currentDate),o.defineSystemFunction("current-time",[],s.currentTime),o.defineSystemFunction("implicit-timezone",[],s.implicitTimezone),o.defineSystemFunction("default-collation",[],s.defaultCollation),o.defineSystemFunction("static-base-uri",[],s.staticBaseUri),o.defineSystemFunction("years-from-duration",[[g,"?"]],u.yearsFromDuration),o.defineSystemFunction("months-from-duration",[[g,"?"]],u.monthsFromDuration),o.defineSystemFunction("days-from-duration",[[g,"?"]],u.daysFromDuration),o.defineSystemFunction("hours-from-duration",[[g,"?"]],u.hoursFromDuration),o.defineSystemFunction("minutes-from-duration",[[g,"?"]],u.minutesFromDuration),o.defineSystemFunction("seconds-from-duration",[[g,"?"]],u.secondsFromDuration),o.defineSystemFunction("year-from-dateTime",[[T,"?"]],u.yearFromDateTime),o.defineSystemFunction("month-from-dateTime",[[T,"?"]],u.monthFromDateTime),o.defineSystemFunction("day-from-dateTime",[[T,"?"]],u.dayFromDateTime),o.defineSystemFunction("hours-from-dateTime",[[T,"?"]],u.hoursFromDateTime),o.defineSystemFunction("minutes-from-dateTime",[[T,"?"]],u.minutesFromDateTime),o.defineSystemFunction("seconds-from-dateTime",[[T,"?"]],u.secondsFromDateTime),o.defineSystemFunction("timezone-from-dateTime",[[T,"?"]],u.timezoneFromDateTime),o.defineSystemFunction("year-from-date",[[v,"?"]],u.yearFromDate),o.defineSystemFunction("month-from-date",[[v,"?"]],u.monthFromDate),o.defineSystemFunction("day-from-date",[[v,"?"]],u.dayFromDate),o.defineSystemFunction("timezone-from-date",[[v,"?"]],u.timezoneFromDate),o.defineSystemFunction("hours-from-time",[[w,"?"]],u.hoursFromTime),o.defineSystemFunction("minutes-from-time",[[w,"?"]],u.minutesFromTime),o.defineSystemFunction("seconds-from-time",[[w,"?"]],u.secondsFromTime),o.defineSystemFunction("timezone-from-time",[[w,"?"]],u.timezoneFromTime),o.defineSystemFunction("adjust-dateTime-to-timezone",[[T,"?"],[x,"?",!0]],u.adjustDateTimeToTimezone),o.defineSystemFunction("adjust-date-to-timezone",[[v,"?"],[x,"?",!0]],u.adjustDateToTimezone),o.defineSystemFunction("adjust-time-to-timezone",[[w,"?"],[x,"?",!0]],u.adjustTimeToTimezone),o.defineSystemFunction("name",[[N,"?",!0]],c.name),o.defineSystemFunction("local-name",[[N,"?",!0]],c.localName),o.defineSystemFunction("namespace-uri",[[N,"?",!0]],c.namespaceUri),o.defineSystemFunction("number",[[d,"?",!0]],c.number),o.defineSystemFunction("lang",[[y,"?"],[N,"",!0]],c.lang),o.defineSystemFunction("root",[[N,"?",!0]],c.root),o.defineSystemFunction("abs",[[S,"?"]],f.abs),o.defineSystemFunction("ceiling",[[S,"?"]],f.ceiling),o.defineSystemFunction("floor",[[S,"?"]],f.floor),o.defineSystemFunction("round",[[S,"?"]],f.round),o.defineSystemFunction("round-half-to-even",[[S,"?"],[I,"",!0]],f.roundHalfToEven),o.defineSystemFunction("resolve-QName",[[y,"?"],[E]],l.resolveQName),o.defineSystemFunction("QName",[[y,"?"],[y]],l.QName),o.defineSystemFunction("prefix-from-QName",[[D,"?"]],l.prefixFromQName),o.defineSystemFunction("local-name-from-QName",[[D,"?"]],l.localNameFromQName),o.defineSystemFunction("namespace-uri-from-QName",[[D,"?"]],l.namespaceUriFromQName),o.defineSystemFunction("namespace-uri-for-prefix",[[y,"?"],[E]],l.namespaceUriForPrefix),o.defineSystemFunction("in-scope-prefixes",[[E]],l.inScopePrefixes),o.defineSystemFunction("boolean",[[O,"*"]],p.boolean),o.defineSystemFunction("index-of",[[d,"*"],[d],[y,"",!0]],p.indexOf),o.defineSystemFunction("empty",[[O,"*"]],p.empty),o.defineSystemFunction("exists",[[O,"*"]],p.exists),o.defineSystemFunction("distinct-values",[[d,"*"],[y,"",!0]],p.distinctValues),o.defineSystemFunction("insert-before",[[O,"*"],[I],[O,"*"]],p.insertBefore),o.defineSystemFunction("remove",[[O,"*"],[I]],p.remove),o.defineSystemFunction("reverse",[[O,"*"]],p.reverse),o.defineSystemFunction("subsequence",[[O,"*"],[S,""],[S,"",!0]],p.subsequence),o.defineSystemFunction("unordered",[[O,"*"]],p.unordered),o.defineSystemFunction("zero-or-one",[[O,"*"]],p.zeroOrOne),o.defineSystemFunction("one-or-more",[[O,"*"]],p.oneOrMore),o.defineSystemFunction("exactly-one",[[O,"*"]],p.exactlyOne),o.defineSystemFunction("deep-equal",[[O,"*"],[O,"*"],[y,"",!0]],p.deepEqual),o.defineSystemFunction("count",[[O,"*"]],p.count),o.defineSystemFunction("avg",[[d,"*"]],p.avg),o.defineSystemFunction("max",[[d,"*"],[y,"",!0]],p.max),o.defineSystemFunction("min",[[d,"*"],[y,"",!0]],p.min),o.defineSystemFunction("sum",[[d,"*"],[d,"?",!0]],p.sum),o.defineSystemFunction("id",[[y,"*"],[N,"",!0]],p.id),o.defineSystemFunction("idref",[[y,"*"],[N,"",!0]],p.idref),o.defineSystemFunction("doc",[[y,"?",!0]],p.doc),o.defineSystemFunction("doc-available",[[y,"?",!0]],p.docAvailable),o.defineSystemFunction("collection",[[y,"?",!0]],p.collection),o.defineSystemFunction("element-with-id",[[y,"*"],[N,"",!0]],p.elementWithId),o.defineSystemFunction("codepoints-to-string",[[I,"*"]],m.codepointsToString),o.defineSystemFunction("string-to-codepoints",[[y,"?"]],m.stringToCodepoints),o.defineSystemFunction("compare",[[y,"?"],[y,"?"],[y,"",!0]],m.compare),o.defineSystemFunction("codepoint-equal",[[y,"?"],[y,"?"]],m.codepointEqual),o.defineSystemFunction("concat",null,m.concat),o.defineSystemFunction("string-join",[[y,"*"],[y]],m.stringJoin),o.defineSystemFunction("substring",[[y,"?"],[S],[S,"",!0]],m.substring),o.defineSystemFunction("string-length",[[y,"?",!0]],m.stringLength),o.defineSystemFunction("normalize-space",[[y,"?",!0]],m.normalizeSpace),o.defineSystemFunction("normalize-unicode",[[y,"?"],[y,"",!0]],m.normalizeUnicode),o.defineSystemFunction("upper-case",[[y,"?"]],m.upperCase),o.defineSystemFunction("lower-case",[[y,"?"]],m.lowerCase),o.defineSystemFunction("translate",[[y,"?"],[y],[y]],m.translate),o.defineSystemFunction("encode-for-uri",[[y,"?"]],m.encodeForUri),o.defineSystemFunction("iri-to-uri",[[y,"?"]],m.iriToUri),o.defineSystemFunction("escape-html-uri",[[y,"?"]],m.escapeHtmlUri),o.defineSystemFunction("contains",[[y,"?"],[y,"?"],[y,"",!0]],m.contains),o.defineSystemFunction("starts-with",[[y,"?"],[y,"?"],[y,"",!0]],m.startsWith),o.defineSystemFunction("ends-with",[[y,"?"],[y,"?"],[y,"",!0]],m.endsWith),o.defineSystemFunction("substring-before",[[y,"?"],[y,"?"],[y,"",!0]],m.substringBefore),o.defineSystemFunction("substring-after",[[y,"?"],[y,"?"],[y,"",!0]],m.substringAfter),o.defineSystemFunction("matches",[[y,"?"],[y],[y,"",!0]],m.matches),o.defineSystemFunction("replace",[[y,"?"],[y],[y],[y,"",!0]],m.replace),o.defineSystemFunction("tokenize",[[y,"?"],[y],[y,"",!0]],m.tokenize),o.defineSystemFunction("trace",[[O,"*"],[y]],h.trace)},function(e,t,n){var o=n(0),i=n(8),r=n(7),a=n(16),s=n(3),u=n(22);t={nodeName:function(e){if(null!=e){var t=this.DOMAdapter.getProperty;switch(t(e,"nodeType")){case 1:case 2:return new u(t(e,"prefix"),t(e,"localName"),t(e,"namespaceURI"));case 5:case 6:throw"Not implemented";case 7:return new u(null,t(e,"nodeName"),null);case 10:return new u(null,t(e,"name"),null)}}return null},nilled:function(e){return null!=e&&1==this.DOMAdapter.getProperty(e,"nodeType")?new r(!1):null},string:function(e){if(!arguments.length){if(!this.item)throw new o("XPDY0002");e=this.item}return null==e?new s(""):s.cast(i.atomize([e],this)[0])},data:function(e){return i.atomize(e,this)},baseUri:function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","base-uri() function called when the context item is not a node");e=this.item}return a.cast(new s(this.DOMAdapter.getProperty(e,"baseURI")||""))},documentUri:function(e){if(null!=e){var t=this.DOMAdapter.getProperty;if(9==t(e,"nodeType"))return a.cast(new s(t(e,"documentURI")||""))}return null}};e.exports=t},function(e,t,n){var o=n(0),i=n(3),r=n(16);t={resolveUri:function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","resolve-uri() function called when the context item is not a node");t=new i(this.DOMAdapter.getProperty(this.item,"baseURI")||"")}if(null==e)return null;if(""==e.valueOf()||"#"==e.valueOf().charAt(0))return r.cast(t);var n=r.cast(e);if(n.scheme)return n;var a=r.cast(t);if(n.scheme=a.scheme,!n.authority&&(n.authority=a.authority,"/"!=n.path.charAt(0))){var s=n.path.split("/"),u=a.path.split("/");u.pop();for(var c=""==u[0]?1:0,f=0,l=s.length;f<l;f++)".."==s[f]?u.length>c?u.pop():(u.push(s[f]),c++):"."!=s[f]&&u.push(s[f]);".."!=s[--f]&&"."!=s[f]||u.push(""),n.path=u.join("/")}return n}};e.exports=t},function(e,t,n){var o=n(8),i=n(7);t={true:function(){return new i(!0)},false:function(){return new i(!1)},not:function(e){return new i(!o.toEBV(e,this))}};e.exports=t},function(e,t,n){var o=n(17),i=n(18),r=n(5),a=n(16),s=n(3);t={position:function(){return new r(this.position)},last:function(){return new r(this.size)},currentDateTime:function(){return this.dateTime},currentDate:function(){return o.cast(this.dateTime)},currentTime:function(){return i.cast(this.dateTime)},implicitTimezone:function(){return this.timezone},defaultCollation:function(){return new s(this.staticContext.defaultCollationName)},staticBaseUri:function(){return a.cast(new s(this.staticContext.baseURI||""))}};e.exports=t},function(e,t,n){(function(t){var o=n(17),i=n(18),r=n(15),a=n(10),s=n(12),u=n(5),c=t.Math,f={};function l(e,t){if(null==e)return null;var n=e[t]*(e.negative?-1:1);return"seconds"==t?new r(n):new u(n)}function p(e,t){if(null==e)return null;if("timezone"==t){var n=e.timezone;return null==n?null:new s(0,c.abs(~~(n/60)),c.abs(n%60),0,n<0)}var a=e[t];return e instanceof o||"hours"==t&&24==a&&(a=0),e instanceof i||(a*=e.negative?-1:1),"seconds"==t?new r(a):new u(a)}f.yearsFromDuration=function(e){return l(e,"year")},f.monthsFromDuration=function(e){return l(e,"month")},f.daysFromDuration=function(e){return l(e,"day")},f.hoursFromDuration=function(e){return l(e,"hours")},f.minutesFromDuration=function(e){return l(e,"minutes")},f.secondsFromDuration=function(e){return l(e,"seconds")},f.yearFromDateTime=function(e){return p(e,"year")},f.monthFromDateTime=function(e){return p(e,"month")},f.dayFromDateTime=function(e){return p(e,"day")},f.hoursFromDateTime=function(e){return p(e,"hours")},f.minutesFromDateTime=function(e){return p(e,"minutes")},f.secondsFromDateTime=function(e){return p(e,"seconds")},f.timezoneFromDateTime=function(e){return p(e,"timezone")},f.yearFromDate=function(e){return p(e,"year")},f.monthFromDate=function(e){return p(e,"month")},f.dayFromDate=function(e){return p(e,"day")},f.timezoneFromDate=function(e){return p(e,"timezone")},f.hoursFromTime=function(e){return p(e,"hours")},f.minutesFromTime=function(e){return p(e,"minutes")},f.secondsFromTime=function(e){return p(e,"seconds")},f.timezoneFromTime=function(e){return p(e,"timezone")},f.adjustDateTimeToTimezone=function(e,t){return a.adjustTimezone(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)},f.adjustDateToTimezone=function(e,t){return a.adjustTimezone(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)},f.adjustTimeToTimezone=function(e,t){return a.adjustTimezone(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)},e.exports=f}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(8),r=n(9),a=n(7),s=n(3),u=n(14),c=n(16),f=t.NaN,l={name:function(e){if(arguments.length){if(null==e)return new s("")}else{if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","name() function called when the context item is not a node");e=this.item}var t=r.functions["node-name"].call(this,e);return new s(null==t?"":t.toString())},localName:function(e){if(arguments.length){if(null==e)return new s("")}else{if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","local-name() function called when the context item is not a node");e=this.item}return new s(this.DOMAdapter.getProperty(e,"localName")||"")},namespaceUri:function(e){if(arguments.length){if(null==e)return c.cast(new s(""))}else{if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","namespace-uri() function called when the context item is not a node");e=this.item}return c.cast(new s(this.DOMAdapter.getProperty(e,"namespaceURI")||""))},number:function(e){if(!arguments.length){if(!this.item)throw new o("XPDY0002");e=i.atomize([this.item],this)[0]}var t=new u(f);if(null!=e)try{t=u.cast(e)}catch(e){}return t},lang:function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","lang() function called when the context item is not a node");t=this.item}var n,i=this.DOMAdapter.getProperty;for(2==i(t,"nodeType")&&(t=i(t,"ownerElement"));t;t=i(t,"parentNode"))if(n=i(t,"attributes"))for(var r=0,s=n.length;r<s;r++)if("xml:lang"==i(n[r],"nodeName"))return new a(i(n[r],"value").replace(/-.+/,"").toLowerCase()==e.valueOf().replace(/-.+/,"").toLowerCase());return new a(!1)},root:function(e){if(arguments.length){if(null==e)return null}else{if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","root() function called when the context item is not a node");e=this.item}var t=this.DOMAdapter.getProperty;2==t(e,"nodeType")&&(e=t(e,"ownerElement"));for(var n=e;n;n=t(e,"parentNode"))e=n;return e}};e.exports=l}).call(this,n(1))},function(e,t,n){(function(t){var o=n(9),i=n(15),r=n(5),a=t.Math,s={abs:function(e){return new i(a.abs(e))},ceiling:function(e){return new i(a.ceil(e))},floor:function(e){return new i(a.floor(e))},round:function(e){return new i(a.round(e))},roundHalfToEven:function(e,t){var n=arguments.length>1?t.valueOf():0;if(n<0){var s=new r(a.pow(10,-n)),u=a.round(o.operators["numeric-divide"].call(this,e,s)),c=new r(u);return nDecimal=a.abs(o.operators["numeric-subtract"].call(this,c,o.operators["numeric-divide"].call(this,e,s))),o.operators["numeric-multiply"].call(this,o.operators["numeric-add"].call(this,c,new i(.5==nDecimal&&u%2?-1:0)),s)}s=new r(a.pow(10,n)),u=a.round(o.operators["numeric-multiply"].call(this,e,s)),c=new r(u);return nDecimal=a.abs(o.operators["numeric-subtract"].call(this,c,o.operators["numeric-multiply"].call(this,e,s))),o.operators["numeric-divide"].call(this,o.operators["numeric-add"].call(this,c,new i(.5==nDecimal&&u%2?-1:0)),s)}};e.exports=s}).call(this,n(1))},function(e,t,n){var o=n(0),i=n(3),r=n(22),a=n(16),s=n(23),u=/^(?:(?![0-9-])(\w[\w.-]*):)?(?![0-9-])(\w[\w.-]*)$/;t={resolveQName:function(e,t){if(null==e)return null;var n=e.valueOf(),i=n.match(u);if(!i)throw new o("FOCA0002","Invalid QName '"+n+"'");var a=i[1]||null,s=i[2],c=this.DOMAdapter.lookupNamespaceURI(t,a);if(null!=a&&!c)throw new o("FONS0004","Namespace prefix '"+a+"' has not been declared");return new r(a,s,c||null)},QName:function(e,t){var n=t.valueOf(),i=n.match(u);if(!i)throw new o("FOCA0002","Invalid QName '"+n+"'");return new r(i[1]||null,i[2]||null,null==e?"":e.valueOf())},prefixFromQName:function(e){return null!=e&&e.prefix?new s(e.prefix):null},localNameFromQName:function(e){return null==e?null:new s(e.localName)},namespaceUriFromQName:function(e){return null==e?null:a.cast(new i(e.namespaceURI||""))},namespaceUriForPrefix:function(e,t){var n=null==e?"":e.valueOf(),o=this.DOMAdapter.lookupNamespaceURI(t,n||null);return null==o?null:a.cast(new i(o))},inScopePrefixes:function(e){throw"Function 'in-scope-prefixes' not implemented"}};e.exports=t},function(e,t,n){(function(t){var o=n(0),i=n(9),r=n(8),a=n(35),s=n(34),u=n(31),c=n(11),f=n(14),l=n(5),p=n(7),m=n(3),h=t.Math,d=t.String,y=function(e){return d(e).trim()},v=function(e,t){return e.indexOf(t)},w={boolean:function(e){return new p(r.toEBV(e,this))},indexOf:function(e,t,n){if(!e.length||null==t)return[];var o=t;o instanceof c&&(o=m.cast(o));for(var i,r=[],a=0,s=e.length;a<s;a++)(i=e[a])instanceof c&&(i=m.cast(i)),i.valueOf()===o.valueOf()&&r.push(new l(a+1));return r},empty:function(e){return new p(!e.length)},exists:function(e){return new p(!!e.length)},distinctValues:function(e,t){if(arguments.length>1)throw"Collation parameter in function 'distinct-values' is not implemented";if(!e.length)return null;for(var n,o=[],i=0,r=e.length;i<r;i++){(n=e[i])instanceof c&&(n=m.cast(n));for(var a,s=0,u=o.length,f=!1;s<u&&!f;s++)(a=o[s])instanceof c&&(a=m.cast(a)),a.valueOf()===n.valueOf()&&(f=!0);f||o.push(e[i])}return o},insertBefore:function(e,t,n){if(!e.length)return n;if(!n.length)return e;var o=e.length,i=t.valueOf();i<1?i=1:i>o&&(i=o+1);for(var r=[],a=0;a<o;a++)i==a+1&&(r=r.concat(n)),r.push(e[a]);return i==a+1&&(r=r.concat(n)),r},remove:function(e,t){if(!e.length)return[];var n=e.length,o=t.valueOf();if(o<1||o>n)return e;for(var i=[],r=0;r<n;r++)o!=r+1&&i.push(e[r]);return i},reverse:function(e){return e.reverse(),e},subsequence:function(e,t,n){var o=h.round(t),i=arguments.length>2?h.round(n):e.length-o+1;return e.slice(o-1,o-1+i)},unordered:function(e){return e},zeroOrOne:function(e){if(e.length>1)throw new o("FORG0003");return e},oneOrMore:function(e){if(!e.length)throw new o("FORG0004");return e},exactlyOne:function(e){if(1!=e.length)throw new o("FORG0005");return e},deepEqual:function(e,t,n){throw"Function 'deep-equal' not implemented"},count:function(e){return new l(e.length)},avg:function(e){if(!e.length)return null;try{var t=e[0];t instanceof c&&(t=f.cast(t));for(var n,i=1,r=e.length;i<r;i++)(n=e[i])instanceof c&&(n=f.cast(n)),t=u.operators["+"](t,n,this);return s.operators.div(t,new l(r),this)}catch(e){throw"XPTY0004"!=e.code?e:new o("FORG0006","Input to avg() contains a mix of types")}},max:function(e,t){if(!e.length)return null;try{var n=e[0];n instanceof c&&(n=f.cast(n));for(var i,r=1,s=e.length;r<s;r++)(i=e[r])instanceof c&&(i=f.cast(i)),a.vcOperators.ge(i,n,this).valueOf()&&(n=i);return n}catch(e){throw"XPTY0004"!=e.code?e:new o("FORG0006","Input to max() contains a mix of not comparable values")}},min:function(e,t){if(!e.length)return null;try{var n=e[0];n instanceof c&&(n=f.cast(n));for(var i,r=1,s=e.length;r<s;r++)(i=e[r])instanceof c&&(i=f.cast(i)),a.vcOperators.le(i,n,this).valueOf()&&(n=i);return n}catch(e){throw"XPTY0004"!=e.code?e:new o("FORG0006","Input to min() contains a mix of not comparable values")}},sum:function(e,t){if(!e.length)return arguments.length>1?t:new f(0);try{var n=e[0];n instanceof c&&(n=f.cast(n));for(var i,r=1,a=e.length;r<a;r++)(i=e[r])instanceof c&&(i=f.cast(i)),n=u.operators["+"](n,i,this);return n}catch(e){throw"XPTY0004"!=e.code?e:new o("FORG0006","Input to sum() contains a mix of types")}},id:function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new o("XPTY0004","id() function called when the context item is not a node");t=this.item}var n=i.functions.root.call(this,t);if(9!=this.DOMAdapter.getProperty(n,"nodeType"))throw new o("FODC0001");for(var a=[],s=0;s<e.length;s++)for(var u=0,c=y(e[s]).split(/\s+/),f=c.length;u<f;u++)(t=this.DOMAdapter.getElementById(n,c[u]))&&-1==v(a,t)&&a.push(t);return r.order(a,this)},idref:function(e,t){throw"Function 'idref' not implemented"},doc:function(e){return arguments.length<1?null:this.staticContext.documents[e.valueOf()]||null},docAvailable:function(e){return new p(arguments.length>0&&e.valueOf()in this.staticContext.documents)},collection:function(e){return arguments.length<1?this.staticContext.defaultCollection:this.staticContext.collections[e.valueOf()]||null},elementWithId:function(e,t){throw"Function 'element-with-id' not implemented"}};e.exports=w}).call(this,n(1))},function(e,t,n){(function(t){var o=n(0),i=n(8),r=n(46),a=n(7),s=n(5),u=n(3),c=t.encodeURIComponent,f=t.encodeURI,l=t.decodeURI,p=t.RegExp,m=t.Math,h=t.String,d=function(e){return h(e).trim()},y=new r;y.equals=function(e,t){return e==t},y.compare=function(e,t){return e==t?0:e>t?1:-1};var v={};function w(e,t){var n="---",i="---",r="-----",a="A-Z_a-z\\-.0-9"+n+"-"+i+"-"+r,s="A-Z_a-z"+n+i+r;if(e=e.replace(/\[\\i-\[:\]\]/g,"["+s+"]").replace(/\[\\c-\[:\]\]/g,"["+a+"]").replace(/\\i/g,"[:"+s+"]").replace(/\\I/g,"[^:"+s+"]").replace(/\\c/g,"[:"+a+"]").replace(/\\C/g,"[^:"+a+"]"),t&&!t.match(/^[smix]+$/))throw new o("FORX0001");var u=t.indexOf("s")>=0,c=t.indexOf("x")>=0;if(u||c){t=t.replace(/[sx]/g,"");for(var f,l=[],m=/\s/,h=0,d=e.length,y=!1,v="";h<d;h++)f=e.charAt(h),"\\"!=v&&("["==f?y=!0:"]"==f&&(y=!1)),!y&&c&&m.test(f)||(l[l.length]=!y&&u&&"."==f&&"\\"!=v?"(?:.|\\s)":f),v=f;e=l.join("")}return new p(e,t+"g")}v.codepointsToString=function(e){for(var t=[],n=0,o=e.length;n<o;n++)t.push(h.fromCharCode(e[n]));return new u(t.join(""))},v.stringToCodepoints=function(e){if(null==e)return null;var t=e.valueOf();if(""==t)return[];for(var n=[],o=0,i=t.length;o<i;o++)n.push(new s(t.charCodeAt(o)));return n},v.compare=function(e,t,n){if(null==e||null==t)return null;var i,r=this.staticContext.defaultCollationName;if(arguments.length>2&&(r=n.valueOf()),!(i="http://www.w3.org/2005/xpath-functions/collation/codepoint"==r?y:this.staticContext.getCollation(r)))throw new o("FOCH0002","Unknown collation {"+r+"}");return new s(i.compare(e.valueOf(),t.valueOf()))},v.codepointEqual=function(e,t){return null==e||null==t?null:new a(e.valueOf()==t.valueOf())},v.concat=function(){if(arguments.length<2)throw new o("XPST0017","Function concat() must have at least 2 arguments");for(var e,t=[],n=0,r=arguments.length;n<r;n++)e=arguments[n],i.assertSequenceCardinality(e,this,"?","each argument of concat()"),e.length&&(t[t.length]=u.cast(i.atomize(e,this)[0]).valueOf());return new u(t.join(""))},v.stringJoin=function(e,t){return new u(e.join(t))},v.substring=function(e,t,n){var o=null==e?"":e.valueOf(),i=m.round(t)-1,r=arguments.length>2?i+m.round(n):o.length;return new u(r>i?o.substring(i,r):"")},v.stringLength=function(e){if(!arguments.length){if(!this.item)throw new o("XPDY0002");e=u.cast(i.atomize([this.item],this)[0])}return new s(null==e?0:e.valueOf().length)},v.normalizeSpace=function(e){if(!arguments.length){if(!this.item)throw new o("XPDY0002");e=u.cast(i.atomize([this.item],this)[0])}return new u(null==e?"":d(e).replace(/\s\s+/g," "))},v.normalizeUnicode=function(e,t){throw"Function 'normalize-unicode' not implemented"},v.upperCase=function(e){return new u(null==e?"":e.valueOf().toUpperCase())},v.lowerCase=function(e){return new u(null==e?"":e.valueOf().toLowerCase())},v.translate=function(e,t,n){if(null==e)return new u("");for(var o,i=e.valueOf().split(""),r=t.valueOf().split(""),a=n.valueOf().split(""),s=a.length,c=[],f=0,l=i.length;f<l;f++)-1==(o=r.indexOf(i[f]))?c[c.length]=i[f]:o<s&&(c[c.length]=a[o]);return new u(c.join(""))},v.encodeForUri=function(e){return new u(null==e?"":c(e))},v.iriToUri=function(e){return new u(null==e?"":f(l(e)))},v.escapeHtmlUri=function(e){if(null==e||""==e.valueOf())return new u("");for(var t,n=e.valueOf().split(""),o=0,i=n.length;o<i;o++)((t=n[o].charCodeAt(0))<32||t>126)&&(n[o]=c(n[o]));return new u(n.join(""))},v.contains=function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'contains' is not implemented";return new a((null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf())>=0)},v.startsWith=function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'starts-with' is not implemented";return new a(0==(null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf()))},v.endsWith=function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'ends-with' is not implemented";var o=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new a(o.indexOf(i)==o.length-i.length)},v.substringBefore=function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'substring-before' is not implemented";var o=null==e?"":e.valueOf(),i=null==t?"":t.valueOf(),r=o.indexOf(i);return new u(r<0?"":o.substring(0,r))},v.substringAfter=function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'substring-after' is not implemented";var o=null==e?"":e.valueOf(),i=null==t?"":t.valueOf(),r=o.indexOf(i);return new u(r<0?"":o.substring(r+i.length))},v.matches=function(e,t,n){var o=null==e?"":e.valueOf(),i=w(t.valueOf(),arguments.length>2?n.valueOf():"");return new a(i.test(o))},v.replace=function(e,t,n,o){var i=null==e?"":e.valueOf(),r=w(t.valueOf(),arguments.length>3?o.valueOf():"");return new u(i.replace(r,n.valueOf()))},v.tokenize=function(e,t,n){for(var o=null==e?"":e.valueOf(),i=w(t.valueOf(),arguments.length>2?n.valueOf():""),r=[],a=0,s=o.split(i),c=s.length;a<c;a++)r.push(new u(s[a]));return r},e.exports=v}).call(this,n(1))},function(e,t,n){(function(t){var n={trace:function(e,n){var o=t.console;return o&&o.log&&o.log(n.valueOf(),e),e}};e.exports=n}).call(this,n(1))},function(e,t,n){var o=n(9),i=n(112),r=n(113),a=n(114),s=n(115),u=n(116),c=n(117),f=n(118),l=n(119);o.defineSystemOperator("hexBinary-equal",i.hexBinaryEqual),o.defineSystemOperator("base64Binary-equal",i.base64BinaryEqual),o.defineSystemOperator("boolean-equal",r.booleanEqual),o.defineSystemOperator("boolean-less-than",r.booleanLessThan),o.defineSystemOperator("boolean-greater-than",r.booleanGreaterThan),o.defineSystemOperator("yearMonthDuration-less-than",a.yearMonthDurationLessThan),o.defineSystemOperator("yearMonthDuration-greater-than",a.yearMonthDurationGreaterThan),o.defineSystemOperator("dayTimeDuration-less-than",a.dayTimeDurationLessThan),o.defineSystemOperator("dayTimeDuration-greater-than",a.dayTimeDurationGreaterThan),o.defineSystemOperator("duration-equal",a.durationEqual),o.defineSystemOperator("dateTime-equal",a.dateTimeEqual),o.defineSystemOperator("dateTime-less-than",a.dateTimeLessThan),o.defineSystemOperator("dateTime-greater-than",a.dateTimeGreaterThan),o.defineSystemOperator("date-equal",a.dateEqual),o.defineSystemOperator("date-less-than",a.dateLessThan),o.defineSystemOperator("date-greater-than",a.dateGreaterThan),o.defineSystemOperator("time-equal",a.timeEqual),o.defineSystemOperator("time-less-than",a.timeLessThan),o.defineSystemOperator("time-greater-than",a.timeGreaterThan),o.defineSystemOperator("gYearMonth-equal",a.GYearMonthEqual),o.defineSystemOperator("gYear-equal",a.GYearEqual),o.defineSystemOperator("gMonthDay-equal",a.GMonthDayEqual),o.defineSystemOperator("gMonth-equal",a.GMonthEqual),o.defineSystemOperator("gDay-equal",a.GDayEqual),o.defineSystemOperator("add-yearMonthDurations",a.addYearMonthDurations),o.defineSystemOperator("subtract-yearMonthDurations",a.subtractYearMonthDurations),o.defineSystemOperator("multiply-yearMonthDuration",a.multiplyYearMonthDuration),o.defineSystemOperator("divide-yearMonthDuration",a.divideYearMonthDuration),o.defineSystemOperator("divide-yearMonthDuration-by-yearMonthDuration",a.divideYearMonthDurationByYearMonthDuration),o.defineSystemOperator("add-dayTimeDurations",a.addDayTimeDurations),o.defineSystemOperator("subtract-dayTimeDurations",a.subtractDayTimeDurations),o.defineSystemOperator("multiply-dayTimeDuration",a.multiplyDayTimeDuration),o.defineSystemOperator("divide-dayTimeDuration",a.divideDayTimeDuration),o.defineSystemOperator("divide-dayTimeDuration-by-dayTimeDuration",a.divideDayTimeDurationByDayTimeDuration),o.defineSystemOperator("subtract-dateTimes",a.subtractDateTimes),o.defineSystemOperator("subtract-dates",a.subtractDates),o.defineSystemOperator("subtract-times",a.subtractTimes),o.defineSystemOperator("add-yearMonthDuration-to-dateTime",a.addYearMonthDurationToDateTime),o.defineSystemOperator("add-dayTimeDuration-to-dateTime",a.addDayTimeDurationToDateTime),o.defineSystemOperator("subtract-yearMonthDuration-from-dateTime",a.subtractYearMonthDurationToDateTime),o.defineSystemOperator("subtract-dayTimeDuration-from-dateTime",a.subtractDayTimeDurationToDateTime),o.defineSystemOperator("add-yearMonthDuration-to-date",a.addYearMonthDurationToDate),o.defineSystemOperator("add-dayTimeDuration-to-date",a.addDayTimeDurationToDate),o.defineSystemOperator("subtract-yearMonthDuration-from-date",a.subtractYearMonthDurationFromDate),o.defineSystemOperator("subtract-dayTimeDuration-from-date",a.subtractDayTimeDurationFromDate),o.defineSystemOperator("add-dayTimeDuration-to-time",a.addDayTimeDurationToTime),o.defineSystemOperator("subtract-dayTimeDuration-from-time",a.subtractDayTimeDurationFromTime),o.defineSystemOperator("is-same-node",s.isSameNode),o.defineSystemOperator("node-before",s.nodeBefore),o.defineSystemOperator("node-after",s.nodeAfter),o.defineSystemOperator("NOTATION-equal",u.notationEqual),o.defineSystemOperator("numeric-add",c.numericAdd),o.defineSystemOperator("numeric-subtract",c.numericSubtract),o.defineSystemOperator("numeric-multiply",c.numericMultiply),o.defineSystemOperator("numeric-divide",c.numericDivide),o.defineSystemOperator("numeric-integer-divide",c.numericIntegerDivide),o.defineSystemOperator("numeric-mod",c.numericMod),o.defineSystemOperator("numeric-unary-plus",c.numericUnaryPlus),o.defineSystemOperator("numeric-unary-minus",c.numericUnaryMinus),o.defineSystemOperator("numeric-equal",c.numericEqual),o.defineSystemOperator("numeric-less-than",c.numericLessThan),o.defineSystemOperator("numeric-greater-than",c.numericGreaterThan),o.defineSystemOperator("QName-equal",f.QNameEqual),o.defineSystemOperator("concatenate",l.concatenate),o.defineSystemOperator("union",l.union),o.defineSystemOperator("intersect",l.intersect),o.defineSystemOperator("except",l.except),o.defineSystemOperator("to",l.to)},function(e,t,n){var o=n(7);t={hexBinaryEqual:function(e,t){return new o(e.valueOf()==t.valueOf())},base64BinaryEqual:function(e,t){return new o(e.valueOf()==t.valueOf())}};e.exports=t},function(e,t,n){var o=n(7);t={booleanEqual:function(e,t){return new o(e.valueOf()==t.valueOf())},booleanLessThan:function(e,t){return new o(e.valueOf()<t.valueOf())},booleanGreaterThan:function(e,t){return new o(e.valueOf()>t.valueOf())}};e.exports=t},function(e,t,n){(function(t){var o=n(7),i=n(15),r=n(10),a=n(17),s=n(18),u=n(12),c=n(21),f=t.Date,l=t.Math,p={};function m(e,t,n){var i=g(e),r=g(t);return new o("lt"==n?i<r:"gt"==n?i>r:i==r)}function h(e,t,n){return d(r.cast(e),r.cast(t),n)}function d(e,t,n){var i=new u(0,0,0,0),a=r.adjustTimezone(new r(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),i).toString(),s=r.adjustTimezone(new r(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.timezone,t.negative),i).toString();return new o("lt"==n?a<s:"gt"==n?a>s:a==s)}function y(e,t,n){var o;e instanceof a?o=new a(e.year,e.month,e.day,e.timezone,e.negative):e instanceof r&&(o=new r(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)),o.year=o.year+t.year*("-"==n?-1:1),o.month=o.month+t.month*("-"==n?-1:1),r.normalizeDate(o,!0);var i=r.getDaysForYearMonth(o.year,o.month);return o.day>i&&(o.day=i),o}function v(e,t,n){var o;if(e instanceof a){var i=60*(60*t.hours+t.minutes)+t.seconds;(o=new a(e.year,e.month,e.day,e.timezone,e.negative)).day=o.day+t.day*("-"==n?-1:1)-1*(i&&"-"==n),r.normalizeDate(o)}else e instanceof r&&((o=new r(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)).seconds=o.seconds+t.seconds*("-"==n?-1:1),o.minutes=o.minutes+t.minutes*("-"==n?-1:1),o.hours=o.hours+t.hours*("-"==n?-1:1),o.day=o.day+t.day*("-"==n?-1:1),r.normalize(o));return o}function w(e){return(12*e.year+e.month)*(e.negative?-1:1)}function T(e){var t=(e=l.round(e))<0,n=~~((e=l.abs(e))/12),o=e-=12*n;return new c(n,o,t)}function g(e){return e.seconds+60*(e.minutes-(null!=e.timezone?e.timezone%60:0)+60*(e.hours-(null!=e.timezone?~~(e.timezone/60):0)))}function x(e){var t=new f((e.negative?-1:1)*e.year,e.month,e.day,0,0,0,0);return e instanceof r&&(t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds)),null!=e.timezone&&t.setMinutes(t.getMinutes()-e.timezone),t.getTime()/1e3}p.yearMonthDurationLessThan=function(e,t){return new o(w(e)<w(t))},p.yearMonthDurationGreaterThan=function(e,t){return new o(w(e)>w(t))},p.dayTimeDurationLessThan=function(e,t){return new o(u.toSeconds(e)<u.toSeconds(t))},p.dayTimeDurationGreaterThan=function(e,t){return new o(u.toSeconds(e)>u.toSeconds(t))},p.durationEqual=function(e,t){return new o(e.negative==t.negative&&w(e)==w(t)&&u.toSeconds(e)==u.toSeconds(t))},p.dateTimeEqual=function(e,t){return d(e,t,"eq")},p.dateTimeLessThan=function(e,t){return d(e,t,"lt")},p.dateTimeGreaterThan=function(e,t){return d(e,t,"gt")},p.dateEqual=function(e,t){return h(e,t,"eq")},p.dateLessThan=function(e,t){return h(e,t,"lt")},p.dateGreaterThan=function(e,t){return h(e,t,"gt")},p.timeEqual=function(e,t){return m(e,t,"eq")},p.timeLessThan=function(e,t){return m(e,t,"lt")},p.timeGreaterThan=function(e,t){return m(e,t,"gt")},p.GYearMonthEqual=function(e,t){return d(new r(e.year,e.month,r.getDaysForYearMonth(e.year,e.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new r(t.year,t.month,r.getDaysForYearMonth(t.year,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},p.GYearEqual=function(e,t){return d(new r(e.year,1,1,0,0,0,null==e.timezone?this.timezone:e.timezone),new r(t.year,1,1,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},p.GMonthDayEqual=function(e,t){return d(new r(1972,e.month,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new r(1972,t.month,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},p.GMonthEqual=function(e,t){return d(new r(1972,e.month,r.getDaysForYearMonth(1972,t.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new r(1972,t.month,r.getDaysForYearMonth(1972,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},p.GDayEqual=function(e,t){return d(new r(1972,12,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new r(1972,12,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},p.addYearMonthDurations=function(e,t){return T(w(e)+w(t))},p.subtractYearMonthDurations=function(e,t){return T(w(e)-w(t))},p.multiplyYearMonthDuration=function(e,t){return T(w(e)*t)},p.divideYearMonthDuration=function(e,t){return T(w(e)/t)},p.divideYearMonthDurationByYearMonthDuration=function(e,t){return new i(w(e)/w(t))},p.addDayTimeDurations=function(e,t){return u.fromSeconds(u.toSeconds(e)+u.toSeconds(t))},p.subtractDayTimeDurations=function(e,t){return u.fromSeconds(u.toSeconds(e)-u.toSeconds(t))},p.multiplyDayTimeDuration=function(e,t){return u.fromSeconds(u.toSeconds(e)*t)},p.divideDayTimeDuration=function(e,t){return u.fromSeconds(u.toSeconds(e)/t)},p.divideDayTimeDurationByDayTimeDuration=function(e,t){return new i(u.toSeconds(e)/u.toSeconds(t))},p.subtractDateTimes=function(e,t){return u.fromSeconds(x(e)-x(t))},p.subtractDates=function(e,t){return u.fromSeconds(x(e)-x(t))},p.subtractTimes=function(e,t){return u.fromSeconds(g(e)-g(t))},p.addYearMonthDurationToDateTime=function(e,t){return y(e,t,"+")},p.addDayTimeDurationToDateTime=function(e,t){return v(e,t,"+")},p.subtractYearMonthDurationToDateTime=function(e,t){return y(e,t,"-")},p.subtractDayTimeDurationToDateTime=function(e,t){return v(e,t,"-")},p.addYearMonthDurationToDate=function(e,t){return y(e,t,"+")},p.addDayTimeDurationToDate=function(e,t){return v(e,t,"+")},p.subtractYearMonthDurationFromDate=function(e,t){return y(e,t,"-")},p.subtractDayTimeDurationFromDate=function(e,t){return v(e,t,"-")},p.addDayTimeDurationToTime=function(e,t){var n=new s(e.hours,e.minutes,e.seconds,e.timezone);return n.hours+=t.hours,n.minutes+=t.minutes,n.seconds+=t.seconds,r.normalizeTime(n)},p.subtractDayTimeDurationFromTime=function(e,t){var n=new s(e.hours,e.minutes,e.seconds,e.timezone);return n.hours-=t.hours,n.minutes-=t.minutes,n.seconds-=t.seconds,r.normalizeTime(n)},e.exports=p}).call(this,n(1))},function(e,t,n){var o=n(7);t={isSameNode:function(e,t){return new o(this.DOMAdapter.isSameNode(e,t))},nodeBefore:function(e,t){return new o(!!(4&this.DOMAdapter.compareDocumentPosition(e,t)))},nodeAfter:function(e,t){return new o(!!(2&this.DOMAdapter.compareDocumentPosition(e,t)))}};e.exports=t},function(e,t,n){n(7),n(28),t={notationEqual:function(e,t){throw"Operator 'NOTATION-equal' not implemented"}};e.exports=t},function(e,t,n){(function(t){var o=n(7),i=n(15),r=n(5),a=t.Math,s=t.isNaN,u=t.isFinite,c=t.String,f={numericAdd:function(e,t){var n=e.valueOf(),o=t.valueOf(),i=a.pow(10,p(n,o));return m(e,t,(n*i+o*i)/i)},numericSubtract:function(e,t){var n=e.valueOf(),o=t.valueOf(),i=a.pow(10,p(n,o));return m(e,t,(n*i-o*i)/i)},numericMultiply:function(e,t){var n=e.valueOf(),o=t.valueOf(),i=a.pow(10,p(n,o));return m(e,t,n*i*(o*i)/(i*i))},numericDivide:function(e,t){var n=e.valueOf(),o=t.valueOf(),i=a.pow(10,p(n,o));return m(e,t,e*i/(t*i))},numericIntegerDivide:function(e,t){var n=e/t;return new r(a.floor(n)+(n<0))},numericMod:function(e,t){var n=e.valueOf(),o=t.valueOf(),i=a.pow(10,p(n,o));return m(e,t,n*i%(o*i)/i)},numericUnaryPlus:function(e){return e},numericUnaryMinus:function(e){return e.value*=-1,e},numericEqual:function(e,t){return new o(e.valueOf()==t.valueOf())},numericLessThan:function(e,t){return new o(e.valueOf()<t.valueOf())},numericGreaterThan:function(e,t){return new o(e.valueOf()>t.valueOf())}},l=/^[+-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;function p(e,t){if(s(e)||!u(a.abs(e))||s(t)||!u(a.abs(t)))return 0;var n=c(e).match(l),o=c(t).match(l),i=a.max(1,(n[2]||n[3]||"").length+(n[5]||0)*("+"==n[4]?-1:1),(o[2]||o[3]||"").length+(o[5]||0)*("+"==o[4]?-1:1));return i+(i%2?0:1)}function m(e,t,n){return new(e instanceof r&&t instanceof r&&n%1?r:i)(n)}e.exports=f}).call(this,n(1))},function(e,t,n){var o=n(7);t={QNameEqual:function(e,t){return new o(e.localName==t.localName&&e.namespaceURI==t.namespaceURI)}};e.exports=t},function(e,t,n){var o=n(0),i=n(8),r=n(5),a=function(e,t){return e.indexOf(t)};t={concatenate:function(e,t){return e.concat(t)},union:function(e,t){for(var n=[],r=0,s=e.length;r<s;r++){if(!this.DOMAdapter.isNode(u=e[r]))throw new o("XPTY0004","Required item type of first operand of 'union' is node()");-1==a(n,u)&&n.push(u)}var u;for(r=0,s=t.length;r<s;r++){if(!this.DOMAdapter.isNode(u=t[r]))throw new o("XPTY0004","Required item type of second operand of 'union' is node()");-1==a(n,u)&&n.push(u)}return i.order(n,this)},intersect:function(e,t){for(var n,r,s=[],u=0,c=e.length;u<c;u++){if(!this.DOMAdapter.isNode(n=e[u]))throw new o("XPTY0004","Required item type of second operand of 'intersect' is node()");r=!1;for(var f=0,l=t.length;f<l&&!r;f++){if(!this.DOMAdapter.isNode(t[f]))throw new o("XPTY0004","Required item type of first operand of 'intersect' is node()");r=this.DOMAdapter.isSameNode(t[f],n)}r&&-1==a(s,n)&&s.push(n)}return i.order(s,this)},except:function(e,t){for(var n,r,s=[],u=0,c=e.length;u<c;u++){if(!this.DOMAdapter.isNode(n=e[u]))throw new o("XPTY0004","Required item type of second operand of 'except' is node()");r=!1;for(var f=0,l=t.length;f<l&&!r;f++){if(!this.DOMAdapter.isNode(t[f]))throw new o("XPTY0004","Required item type of first operand of 'except' is node()");r=this.DOMAdapter.isSameNode(t[f],n)}r||-1!=a(s,n)||s.push(n)}return i.order(s,this)},to:function(e,t){for(var n=[],o=e.valueOf(),i=t.valueOf();o<=i;o++)n.push(new r(o));return n}};e.exports=t},function(e,t,n){var o=n(9),i=(n(27),n(6),n(121),n(4)),r=(n(122),n(123),n(124),n(16)),a=n(37),s=n(7),u=n(17),c=n(10),f=n(15),l=n(14),p=n(20),m=n(125),h=n(42),d=n(40),y=n(41),v=n(39),w=n(38),T=n(36),g=n(28),x=n(22),D=n(3),S=n(18),I=n(11),O=n(12),N=n(21),E=n(126),b=n(50),P=n(5),R=n(51),M=n(127),F=n(25),A=n(52),_=n(128),X=n(49),Y=n(129),z=n(54),U=n(130),C=n(53),q=n(131),k=n(132),G=n(133),V=n(134),K=n(47),B=n(23),L=n(135),j=n(48),H=n(24);o.defineSystemDataType("anyAtomicType",i),o.defineSystemDataType("anyURI",r),o.defineSystemDataType("base64Binary",a),o.defineSystemDataType("boolean",s),o.defineSystemDataType("date",u),o.defineSystemDataType("dateTime",c),o.defineSystemDataType("decimal",f),o.defineSystemDataType("double",l),o.defineSystemDataType("duration",p),o.defineSystemDataType("float",m),o.defineSystemDataType("gDay",h),o.defineSystemDataType("gMonth",d),o.defineSystemDataType("gMonthDay",y),o.defineSystemDataType("gYear",v),o.defineSystemDataType("gYearMonth",w),o.defineSystemDataType("hexBinary",T),o.defineSystemDataType("NOTATION",g),o.defineSystemDataType("QName",x),o.defineSystemDataType("string",D),o.defineSystemDataType("time",S),o.defineSystemDataType("untypedAtomic",I),o.defineSystemDataType("yearMonthDuration",N),o.defineSystemDataType("dayTimeDuration",O),o.defineSystemDataType("byte",E),o.defineSystemDataType("int",b),o.defineSystemDataType("integer",P),o.defineSystemDataType("long",R),o.defineSystemDataType("negativeInteger",M),o.defineSystemDataType("nonNegativeInteger",F),o.defineSystemDataType("nonPositiveInteger",A),o.defineSystemDataType("positiveInteger",_),o.defineSystemDataType("short",X),o.defineSystemDataType("unsignedByte",Y),o.defineSystemDataType("unsignedInt",z),o.defineSystemDataType("unsignedLong",U),o.defineSystemDataType("unsignedShort",C),o.defineSystemDataType("ENTITY",q),o.defineSystemDataType("ID",k),o.defineSystemDataType("IDREF",G),o.defineSystemDataType("language",V),o.defineSystemDataType("Name",K),o.defineSystemDataType("NCName",B),o.defineSystemDataType("NMTOKEN",L),o.defineSystemDataType("normalizedString",j),o.defineSystemDataType("token",H)},function(e,t,n){var o=n(2),i=n(27);function r(){}r.prototype=new i,r.prototype.builtInKind=o.UNAVAILABLE_DT,e.exports=r},function(e,t,n){var o=n(6);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(6);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){var o=n(6);function i(){}i.prototype=new o,e.exports=i},function(e,t,n){(function(t){var o=n(0),i=n(2),r=n(6),a=n(4),s=n(11),u=n(3),c=n(7),f=t.String;function l(e){this.value=e}l.prototype=new a,l.prototype.builtInKind=i.FLOAT_DT,l.prototype.primitiveKind=r.PRIMITIVE_FLOAT,l.prototype.value=null,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return f(this.value)};var p=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof u||e instanceof s){var t=(n=e,f(n).trim()).match(p);if(t)return new l(t[7]?+t[7].replace("INF","Infinity"):+e);throw new o("FORG0001")}var n;if(e instanceof c)return new l(1*e);if(e.primitiveKind==r.PRIMITIVE_DECIMAL||e.primitiveKind==r.PRIMITIVE_DOUBLE)return new l(e.value);throw new o("XPTY0004","Casting value '"+e+"' to xs:float can never succeed")},e.exports=l}).call(this,n(1))},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(49);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.BYTE_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=127&&t.value>=-128)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(52);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.NEGATIVEINTEGER_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=-1)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(25);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.POSITIVEINTEGER_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(53);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.UNSIGNEDBYTE_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=255)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){var o=n(0),i=n(2),r=n(5),a=n(25);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=i.UNSIGNEDLONG_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=0x10000000000000000)return new s(t.value);throw new o("FORG0001")},e.exports=s},function(e,t,n){(function(t){var o=n(2),i=n(23),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.ENTITY_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(23),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.ID_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(23),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.IDREF_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(24),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.LANGUAGE_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){(function(t){var o=n(2),i=n(24),r=t.String;function a(e){this.value=e}a.prototype=new i,a.prototype.builtInKind=o.NMTOKEN_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(1))},function(e,t,n){var o=new(n(26));e.exports=o},function(e,t,n){var o=n(26),i=new o;i.getProperty=function(e,t){return"localName"==t&&1==e.nodeType?e.localName.toLowerCase():"namespaceURI"==t?1==e.nodeType?"http://www.w3.org/1999/xhtml":null:o.prototype.getProperty.call(this,e,t)},e.exports=i},function(e,t,n){var o=n(57),i=n(26),r=new i;r.getProperty=function(e,t){if("localName"==t&&1==e.nodeType)return e.nodeName.toLowerCase();if("prefix"==t)return null;if("namespaceURI"==t)return 1==e.nodeType?"http://www.w3.org/1999/xhtml":null;if("textContent"==t)return e.innerText;if("attributes"==t&&1==e.nodeType){for(var n,r,a=[],s=0,u=e.attributes,c=u.length;s<c;s++)(n=u[s]).specified&&((r=new o).ownerElement=e,r.ownerDocument=e.ownerDocument,r.specified=!0,r.value=r.nodeValue=n.nodeValue,r.name=r.nodeName=r.localName=n.nodeName.toLowerCase(),a[a.length]=r);return a}return i.prototype.getProperty.call(this,e,t)},e.exports=r},function(e,t,n){var o=n(57),i=n(26),r=new i;r.getProperty=function(e,t){if("localName"==t){if(7==e.nodeType)return null;if(1==e.nodeType)return e.baseName}if("prefix"==t||"namespaceURI"==t)return e[t]||null;if("textContent"==t)return e.text;if("attributes"==t&&1==e.nodeType){for(var n,r,a=[],s=0,u=e.attributes,c=u.length;s<c;s++)(n=u[s]).specified&&((r=new o).nodeType=2,r.ownerElement=e,r.ownerDocument=e.ownerDocument,r.specified=!0,r.value=r.nodeValue=n.nodeValue,r.name=r.nodeName=n.nodeName,r.localName=n.baseName,r.prefix=n.prefix||null,r.namespaceURI=n.namespaceURI||null,a[a.length]=r);return a}return i.prototype.getProperty.call(this,e,t)},r.getElementById=function(e,t){return e.nodeFromID(t)},e.exports=r},function(e,t){function n(e){this.node=e}n.prototype.lookupNamespaceURI=function(e){return this.node.lookupNamespaceURI(e)},e.exports=n}])}));